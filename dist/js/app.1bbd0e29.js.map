{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./public/posts/2018-10-16-Vue.md","webpack:///./public/posts/2018-10-16-Vue.md?9041","webpack:///./src/components/Block.vue?1498","webpack:///./src/components/Pagination.vue?e378","webpack:///./public/posts/2016-11-20-Cluster Paper Reading.md","webpack:///./public/posts/2016-11-20-Cluster Paper Reading.md?e6bd","webpack:///./src/components/Block.vue","webpack:///./src/components/Block.vue?0966","webpack:///./src/components/Block.vue?1ecf","webpack:///./public/posts/2019-07-16-Miniprogram Plugin.md","webpack:///./public/posts/2019-07-16-Miniprogram Plugin.md?14d4","webpack:///./public/posts/2017-03-29-Python NLTK.md","webpack:///./public/posts/2017-03-29-Python NLTK.md?889b","webpack:///./src/utils/tool/ListHandler.ts","webpack:///./src/utils/tool/CatalogHandler.ts","webpack:///./public/posts/2017-08-31-Geoserver.md","webpack:///./public/posts/2017-08-31-Geoserver.md?f259","webpack:///./public/posts sync \\.md","webpack:///./public/posts/2018-10-15-Vue View Update.md","webpack:///./public/posts/2018-10-15-Vue View Update.md?3a80","webpack:///./public/posts/2018-01-13-CSS Selector.md","webpack:///./public/posts/2018-01-13-CSS Selector.md?fa96","webpack:///./src/views/List.vue?5f29","webpack:///./src/utils/tool/Tool.ts","webpack:///./src/views/Home.vue?053f","webpack:///./src/utils/tool/PostHandler.ts","webpack:///./src/components/Nav.vue?771c","webpack:///./src/views/App.vue","webpack:///./src/views/App.vue?f4f2","webpack:///./src/views/Home.vue","webpack:///./src/components/Pagination.vue","webpack:///./src/components/Pagination.vue?d05b","webpack:///./src/components/Pagination.vue?f3d0","webpack:///./src/views/Home.vue?d5e7","webpack:///./src/views/Home.vue?a655","webpack:///./src/views/List.vue","webpack:///./src/views/List.vue?a231","webpack:///./src/views/List.vue?021f","webpack:///./src/router/index.ts","webpack:///./src/components/Nav.vue","webpack:///./src/components/Nav.vue?ae01","webpack:///./src/components/Nav.vue?255c","webpack:///./src/main.ts","webpack:///./src/assets/logo.png","webpack:///./src/views/App.vue?24c5","webpack:///./public/posts/2018-10-17-VueRouter.md","webpack:///./public/posts/2018-10-17-VueRouter.md?8ff0","webpack:///./public/posts/2016-12-03-Text Categorization Summary.md","webpack:///./public/posts/2016-12-03-Text Categorization Summary.md?76cc"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","v-pre","render","class","post","tapPost","title","abstract","tags","tapTag","date","props","setup","router","__scopeId","ListHandler","TotalPost","banPagination","total","state","postList","reloadList","startIndex","endIndex","tagList","filterPost","list","this","getAllPostContent","res","sortPost","PageSie","_endIndex","_list","filter","sort","a","b","dateA","replaceAll","dateB","parseInt","files","keys","getAllPostPath","map","path","fileName","getPostName","getPostInfo","info","indexOf","CatalogHandler","CatalogMaxLevels","CatalogList","CatalogOffset","reload","catalogEle","getElementById","left","offsetLeft","top","offsetTop","width","offsetWidth","tocs","getAllH","levelStack","htmlResult","forEach","toc","index","itemText","getHText","itemLabel","getHLabel","levelIndex","unshift","addStartUl","addLi","addEndUl","nodeName","attributes","anchorName","substring","anchorEle","scrollIntoView","behavior","markdownBody","innerHTML","match","replace","text","catalog","label","tagName","tagEles","id","webpackContext","req","webpackContextResolve","style","GitHubOAuth","ClientID","ClientSecret","Repo","Owner","PageConfig","promiseSync","fn","toTop","scrollTo","intersect","listA","listB","x","getPostPath","marked","markedAST","setOptions","renderer","Renderer","gfm","tables","breaks","pedantic","smartLists","smartypants","highlight","highlightAuto","PostHandler","Post","postHtml","catalogHtml","catalogOffset","content","getCatalogHtml","setHId","getCatalogOffset","onresize","anchor","getPostAbstract","layout","matchPostBase","split","trim","filePath","paths","pop","join","ast","parse","parseMarkAst","astItem","textItem","getAstText","body","listItem","noSpaceText","noHtmlText","onPageChange","pageSize","pageCount","curPage","toPre","pageLine","page","toJump","toNext","Number","default","Function","paginationSize","getPageLine","Array","from","Math","ceil","pre","next","to","_listCompiler","listCompiler","components","Block","Pagination","selectedTags","tapAll","item","getAllPostTag","idx","routes","component","Home","List","history","isPost","routeName","route","app","App","Nav","use","mount"],"mappings":"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","file":"js/app.1bbd0e29.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-30e8d370\":\"a4058f6f\",\"chunk-6837cf80\":\"9ab53121\",\"chunk-eec9ea54\":\"d661f4bd\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-30e8d370\":1,\"chunk-6837cf80\":1,\"chunk-eec9ea54\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-30e8d370\":\"2945b688\",\"chunk-6837cf80\":\"fcaee8c4\",\"chunk-eec9ea54\":\"d5764ced\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","<template><section><!-- ---\ntitle: 理解Vue\ndate: 2018-10-16\ntags: Vue\n--- -->\n<p>Vue目前已经成为很多公司的开发框架，使用范围极广，这篇文章我想谈论一下我对Vue的基本理解，包含其概念、双向绑定、组件式开发、生命周期几部分内容。</p>\n<h2>概念</h2>\n<blockquote>\n<p>Vue是一套用于构建用户界面的渐进式框架。与其它大型框架不同的是，Vue 被设计为可以自底向上逐层应用。</p>\n</blockquote>\n<p>Vue的概念中提到一个主要的关键概念叫渐进式框架，那什么是<strong>渐进式框架</strong>呢？</p>\n<p>渐进式框架是指没有强主张，对框架的使用没有强约束关系，可以将Vue当做Jquey只使用他的页面模板，也可以只使用其数据绑定和组件式开发特性，完全不care vuex,vue-router这样的周边工具，也可以使用vue全家桶搭建复杂的单页应用，这种模式便是渐进式开发框架。</p>\n<p>Vue能够用最简单的命令实现尽可能大的功能，极易上手的框架开发、HTML规则的语法模板都是其获得大范围用户群体的原因，但Vue最主要的特性还是<strong>数据双向绑定</strong>机制及<strong>组件式开发</strong>模式。以下是这两方面内容的具体介绍。</p>\n<h2>双向绑定</h2>\n<p>双向绑定是指视图变化的时候能够响应到数据属性的更新，而数据属性的更新也能够快速响应到视图的变化。这里附上我自己根据Vue源码编写的<a href=\"https://github.com/zhangmingemma/framework-source-exercise/tree/master/bilateral-bind\">简易版数据双向绑定实现代码</a></p>\n<h3>实现</h3>\n<p>数据双向绑定的实现主要依赖与三个功能模块：</p>\n<ul>\n<li>观察者Observer: 观察监听数据的变化</li>\n<li>订阅者Watcher: 将创建的实例中的data添加维护为订阅者列表，当数值更新变化的时候，通知指令解析器</li>\n<li>指令解析器Compiler: 解析DOM中的指令模板，绑定指令监听事件</li>\n</ul>\n<p>整个双向绑定实现的过程是从Vue实例创建时开始的，具体过程：</p>\n<ul>\n<li>创建Vue实例：这个时候的代码如下，主要做了两件事情<pre v-pre><code v-pre>function MVVM(options){\n    this.data = options.data;\n    var data = this.data,me = this;\n    Object.keys(data).forEach(function(key){\n        me._proxy(key);\n    })\n    observe(data); //将数据属性添加到Observer中\n    this.$compile = new Compile(options.el || document.body,this); //解析页面模板\n}\n</code></pre>\n<ul>\n<li>\n<p>其一是将data中定义的键值添加到观察者列表中，通过Object.defineProperty的get和set方法观察监听数据的变化；</p>\n<pre v-pre><code v-pre>function observe(data){\n    Object.keys(data).forEach(function(key){\n        defineReactive(data,key,data[key]); //为每一个数据项绑定数据值监听\n    })\n}\nfunction defineReactive(data,key,val){\n    var dep  = new Dep();\n    observe(val); //递归监听数据元素中的所有子元素\n    Object.defineProperty(data, key, {\n        get:function(){  //获取值时触发get方法\n            return val;\n        },\n        set:function(newval){  //更改值时触发set方法\n            if (newval === val) {\n                return;\n            }\n            val = newval;\n            dep.notify();//通知Watcher\n        }\n    })\n}\n</code></pre>\n</li>\n<li>\n<p>其二是将实例中包含的元素逐一由指令解析器解析，按分类为绑定事件的元素添加事件监听，将绑定v-model的添加input事件监听；</p>\n<pre v-pre><code v-pre>function compile(el,vm){\n    this.vm = vm; //vm是整个MVVM实例，即MVVM.js中的options,data都包含\n    this.$el = document.querySelector(el); //el是真实的DOM节点\n    this.$fragment = this.node2Fragment(this.$el); //创建虚拟DOM节点\n    this.compileElement(this.$fragment); //解析页面模板\n    this.$el.appendChild(this.$fragment);\n}\nfunction compileElement(el){\n    var childNodes = el.childNodes,\n        me = this;\n    [].slice.call(childNodes).forEach(function(node){\n        var reg = /\\{\\{(.*)\\}\\}/; //正则表达式匹配页面模板\n        var text = node.textContent;\n        if(node.nodeType == 1){\n            me.compile(node); //解析“v-”绑定的数据节点，如果绑定v-model，则注册时间监听页面视图变化\n        }else if(node.nodeType == 3 &amp;&amp; reg.test(text)){\n            me.compiletext(node,RegExp.$1); //解析“{{}}”绑定的数据节点\n        }\n        if (node.childNodes &amp;&amp; node.childNodes.length) {\n            me.compileElement(node); //递归解析所有子节点\n        }\n    })\n}\n</code></pre>\n</li>\n<li>\n<p>而在指令解析的过程中会将绑定v-数据的全部都添加入订阅者列表，自此数据双向绑定的功能链条已经完全实现</p>\n<pre v-pre><code v-pre>function compiletext(node,exp){  //为{{}}绑定的数据属性添加Watcher\n    var me = this,\n        initText = this.vm[exp];\n    this.updatetext(node,initText);\n    new Watcher(this.vm,exp,function(val){\n        me.updatetext(node,val);\n    })\n} \nfunction modelHandler(node,vm,exp,dir){ //为v-model绑定的数据属性添加Watcher\n    var me = this,\n        val = this.vm[exp];\n    this.modelUpdater(node,val);\n    new Watcher(me.vm,exp,function(value){\n        me.modelUpdater(node,value);\n    });\n    node.addEventListener('input',function(e){ //为v-model绑定注册监听事件\n        var newValue = e.target.value;\n        if(val === newValue){return;}\n        me.vm[exp] = newValue;\n        val = newValue;\n    })\n},\n</code></pre>\n</li>\n</ul>\n</li>\n<li>数据变化 -----&gt; 视图变化\n<ul>\n<li>当数据变化的时候，会触发观察者的set方法，从而触发发生变化的数据属性对应的Watcher，</li>\n<li>Watcher会触发指令解析器，将视图中某一节点node.value替换为新的值</li>\n</ul>\n</li>\n<li>视图变化 -----&gt; 数据变化\n<ul>\n<li>当在输入框输入文字的时候，触发input的监听事件</li>\n<li>将input的node的值赋给绑定订阅者列表中绑定的键值，从而更新数据</li>\n</ul>\n</li>\n</ul>\n<h3>special point</h3>\n<p>Vue官方文档中<a href=\"https://cn.vuejs.org/v2/guide/list.html#%E6%95%B0%E7%BB%84%E6%9B%B4%E6%96%B0%E6%A3%80%E6%B5%8B\">列表渲染</a>中描述了Vue在数据监听中的特殊之处</p>\n<h4>第一方面  Vue不能检测对象属性的添加或删除</h4>\n<blockquote>\n<p>由于 JavaScript 的限制，Vue 不能检测对象属性的添加或删除：</p>\n<p>对于已经创建的实例，Vue 不能动态添加根级别的响应式属性。但是，可以使用</p>\n<ul>\n<li>Vue.set(object, key, value) 方法向嵌套对象添加响应式属性。例如：Vue.set(vm.userProfile, 'age', 27)</li>\n<li>使用 Object.assign 方法，直接赋值的原理监听。例如：this.watchObj = Object.assign({}, this.watchObj, {name: 'xiaoyue',age: 15});</li>\n</ul>\n</blockquote>\n<p>原因是由于Vue在初始化实例时就对属性执行了setter/getter转化过程，所以属性必须开始就在对象上，这样才能让Vue转化监听，后期添加的属性无法进行变化监测。</p>\n<h4>第二方面 数组变化监听的特殊之处</h4>\n<p>我们知道Vue能够监听<strong>整个对数组进行赋值更新</strong>，<strong>对数组使用变异方法进行更新</strong>，并可以响应到视图跟新中，Vue的官方文档中有这样的一段描述：</p>\n<blockquote>\n<p>Vue 包含一组观察数组的变异方法，所以它们也将会触发视图更新。这些方法有push()、pop()、shift()、unshift()、splice()、sort()、reverse()</p>\n<p>由于 JavaScript 的限制，Vue 不能检测以下变动的数组：</p>\n<ol>\n<li>当你利用索引直接设置一个项时，例如：vm.items[indexOfItem] = newValue</li>\n<li>当你修改数组的长度时，例如：vm.items.length = newLength</li>\n</ol>\n</blockquote>\n<p>举个例子：</p>\n<pre v-pre><code v-pre>var vm = new Vue({\n  el: '#demo',\n  data: {\n      nameArray:['Foo' ,'Bar']\n  },\n  computed: {\n    fullName: function () {\n      return this.nameArray[0] + ' ' + this.nameArray[1]\n    }\n  },\n  methods: {\n    change () {\n        this.nameArray[0] = '123'; //fullName不会发生改变\n        this.nameArray = ['123','Bar']; //fullName发生改变\n        this.nameArray.splice(0, 1, '123'); //fullName发生改变\n        this.$set(this.nameArray, 0, '123'); //fullName发生改变\n    }\n  }\n})\n</code></pre>\n<p>其实很简单的可以理解为什么Vue无法监听数组中新增的属性，因为在Vue实例创建的时候，数组中的每个元素就被添加到了Observer的列表中，监测器变化，支持视图响应，新增的属性无法添加到Observer的列表中，因此没有办法响应到视图，对此Vue设置了变异方法对新增元素的push,unshift,splice三种方法做了特异处理，这一部分的源码在<a href=\"https://github.com/vuejs/vue/blob/dev/src/core/observer/array.js\">vue/observer/array.js</a>：</p>\n<pre v-pre><code v-pre>['push','pop','shift','unshift','splice','sort','reverse'].forEach(function (method) {\n  const original = arrayProto[method]\n  def(arrayMethods, method, function mutator (...args) {\n    const result = original.apply(this, args)\n    const ob = this.__ob__\n    let inserted\n    switch (method) { //针对添加新元素的变异方法做了特殊的处理，使得Vue能够监听到通过变异方法添加的元素的变化\n      case 'push':\n      case 'unshift':\n        inserted = args\n        break\n      case 'splice':\n        inserted = args.slice(2)\n        break\n    }\n    if (inserted) ob.observeArray(inserted) //对新增的数据元素进行Observer\n    ob.dep.notify()\n    return result\n  })\n})\n</code></pre>\n<p><strong>但是Object.defineProperty是可以通过索引属性来设置属性的访问器属性的，为什么监听不到呢？？</strong></p>\n<p>其实并不是说JS不能支持响应式数组，并没有这种限制，而是一般的开发者使用数组与使用对象的方法有区别，数组在JS中常被用作栈、队列、集合等数据结构的实现方式，会存储批量的数据以待遍历，并且编译器对数组和对象的优化也有所不同，所以数组的处理需要异化来提高性能。</p>\n<p><strong>首先，针对索引这一点</strong>Vue 中是通过对 每个键设置 getter/setter 来实现响应式的，开发者使用数组，目的往往是遍历，此时调用 getter 开销太大了，所以 Vue 不在数组每个键上设置，而是在数组上定义<code v-pre>__ob__</code> ，并且替换了 push 等等能够影响原数组的原型方法.</p>\n<p><strong>其次，针对length这一点</strong>我们观察Vue的源码，它针对数组做了特殊的变化监测策略：用 Object.keys() 或者 Object.getOwnPropertyNames() 就能获得所有键的名字，前者是所有自有可枚举的，后者是所有自有的，不需要用 length。</p>\n<p>从源码可以看到，Vue跳过了对数组每个键设置响应的过程，而是直接对值进行递归设置响应式,这一部分的源码在<a href=\"https://github.com/vuejs/vue/blob/dev/src/core/observer/index.js\">vue/observer/index.js</a>：</p>\n<pre v-pre><code v-pre>export class Observer {\n  ...\n  constructor (value: any) {\n    ...\n    if (Array.isArray(value)) {\n      const augment = hasProto\n        ? protoAugment\n        : copyAugment\n      augment(value, arrayMethods, arrayKeys)\n      this.observeArray(value)\n    } else {\n      this.walk(value) //监听对象元素的变化\n    }\n  }\n  observeArray (items: Array&lt;any&gt;) {\n    for (let i = 0, l = items.length; i &lt; l; i++) {\n      observe(items[i])//对值进行递归响应式\n    }\n  }\n}\n</code></pre>\n<h2>组件式开发</h2>\n<p>讲完数据双向绑定，可以再来理解一下Vue的组件式开发的概念:</p>\n<blockquote>\n<p>Vue允许小型、独立、可重复使用的组件构建大型应用，几乎任意类型的应用界面都可以抽象成一个组件树。Vue将组建抽象成一个高度封装过的函数，我们只需要在其中定义必要的属性，比如说父组件传入数据的prop，页面模板，交互逻辑之类的，就可以将一部分功能逻辑封装为一个可重复利用，独立的组件。</p>\n</blockquote>\n<p><strong>那么Vue提供的组件封装和我们自己用原生JS封装组件之间有什么样的优势呢？</strong></p>\n<p>Vue的组件封装：<br>\n<img style=\"height:160px;\" src=\"https://zhangmingemma.github.io/dist/images/2018-10-16/vue-component1.png\">\n<img style=\"height:160px;\" src=\"https://zhangmingemma.github.io/dist/images/2018-10-16/vue-component2.png\"></p>\n<p>JS原生组件封装：<br>\n<img style=\"width:400px;\" src=\"https://zhangmingemma.github.io/dist/images/2018-10-16/vue-component3.png\"></p>\n<p>二者相比之下，Vue组件的优势就很明显了：<br></p>\n<ul>\n<li>**可读性：**我们可以看到原生语言封装的组件，页面模板的定义、DOM交互、数据请求都混杂在一起，可读性较差，而Vue的组件封装中页面模板、交互逻辑、CSS样式和我们单独写页面是很类似的，可读性较强;<br></li>\n<li>**可扩展性：**Vue的组件能够轻松的在页面模板或者交互逻辑中扩展新的功能，而原生语言封装的组件在扩展过程中则需要考虑会不会牵动其他的组件逻辑，以及对已有逻辑的更改，可扩展性较差；<br></li>\n<li>**可维护性：**Vue注册一个组件之后，组件的更新和渲染都是独立的，因此当我们对其中一个组件进行更改的时候，其他组件不会受到影响</li>\n</ul>\n<h2>生命周期</h2>\n<p>Vue的生命周期是指Vue从创建实例到实例销毁所经历的一系列过程，可以看到在vue一整个的生命周期中会有很多钩子函数提供给我们在vue生命周期不同的时刻进行操作, 我们一一详解:</p>\n<table>\n<thead>\n<tr>\n<th>钩子</th>\n<th>状况</th>\n<th>可进行的操作</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>beforecreate</td>\n<td>只是一个空壳，无法访问到数据和真实的dom</td>\n<td>添加loading</td>\n</tr>\n<tr>\n<td>created</td>\n<td>实的DOM无法访问，已经可以访问数据，也可以更改数据，此时更改数据不会触发updated函数，不会触发其他的钩子函数</td>\n<td>获取初始数据、结束loading</td>\n</tr>\n<tr>\n<td>beforemount</td>\n<td>虚拟dom已经创建完成，还无法访问真实的DOM,此时更改数据也不会触发updated，不会触发其他的钩子函数，是渲染前最后一次更改数据的机会</td>\n<td>初始数据的获取</td>\n</tr>\n<tr>\n<td>mounted</td>\n<td>组件已经出现在页面中，数据、真实dom、事件都挂载好了</td>\n<td>操作真实dom</td>\n</tr>\n<tr>\n<td>beforeupdate</td>\n<td>当组件或实例的数据更改之后，会立即执行beforeUpdate，因此这个时候数据已经更新，vue的虚拟dom机制会重新构建虚拟dom与上一次的虚拟dom树利用diff算法进行对比之后重新渲染</td>\n<td>不做什么</td>\n</tr>\n<tr>\n<td>updated</td>\n<td>数据已经更改完成，dom也重新render完成</td>\n<td>操作更新后的真实dom</td>\n</tr>\n<tr>\n<td>beforedestroy</td>\n<td>调用$destroy方法后，立即执行beforeDestroy</td>\n<td>清除计时器、清除非指令绑定的事件等善后</td>\n</tr>\n<tr>\n<td>destroyed</td>\n<td>Observer、Watcher都已经解绑，事件监听器都被移除，子实例也都会被销毁，修改数据得不到响应了，但原生DOM还存在</td>\n<td>不做什么</td>\n</tr>\n</tbody>\n</table>\n<p>备注：</p>\n<ul>\n<li>注意 mounted 不会承诺所有的子组件也都一起被挂载。如果你希望等到整个视图都渲染完毕，可以用 <strong>vm.$nextTick</strong> 替换掉 mounted</li>\n<li><strong>Vue 异步执行 DOM 更新</strong>。只要观察到数据变化，Vue 将开启一个队列，并缓冲在同一事件循环中发生的所有数据改变。如果同一个 watcher 被多次触发，只会被推入到队列中一次。这种在缓冲时去除重复数据对于避免不必要的计算和 DOM 操作上非常重要。然后，在下一个的事件循环“tick”中，Vue 刷新队列并执行实际 (已去重的) 工作。</li>\n</ul>\n<h2>小知识点</h2>\n<h3>v-if和v-show</h3>\n<ul>\n<li>v-show中，元素是一直存在的，当v-show为false时，元素display:none只是隐藏了而已。</li>\n<li>v-if 之中的模板也可能包括数据绑定或子组件。v-if 是真实的条件渲染，因为它会确保条件块在切换当中合适地销毁与重建条件块内的事件监听器和子组件。v-if 也是惰性的：如果在初始渲染时条件为假，则什么也不做——在条件第一次变为真时才开始局部编译（编译会被缓存起来）。</li>\n</ul>\n<p>so，一般的，v-if有更高的切换消耗，而v-show有更多的初始化渲染消耗。\nso，如果需要频繁的切换而对安全性无要求，使用v-show。如果在运行时，条件不可能改变，则使用v-if较好。</p>\n<h3>vuex</h3>\n<p>vuex是一种状态管理模式，就是将所有的组件共享的状态集中进行管理，在数据更新之后就会统一的改变各个组件的状态。里面有一些关键的模块，</p>\n<ul>\n<li>state是用来存放共享的数据的，</li>\n<li>getters用来过滤数据，避免对庞大的数据中每一部分都要提交或者更新，</li>\n<li>mutation定义修改数据的逻辑，</li>\n<li>action用来提交修改，最终实现数据的统一更新</li>\n</ul>\n<h3>Vue 与 React的区别</h3>\n<p>React 和 Vue 有许多相似之处，它们都有：</p>\n<ul>\n<li>使用 Virtual DOM</li>\n<li>提供了响应式 (Reactive) 和组件化 (Composable) 的视图组件。</li>\n<li>将注意力集中保持在核心库，而将其他功能如路由和全局状态管理交给相关的库。</li>\n</ul>\n<p>React 和 Vue 之间的区别：</p>\n<ul>\n<li>在 React应用中，当某个组件的状态发生变化时，它会以该组件为根，重新渲染整个组件子树。在 Vue 应用中，组件的依赖是在渲染过程中自动追踪的，所以系统能精确知晓哪个组件确实需要被重渲染。你可以理解为每一个组件都已经自动获得了 shouldComponentUpdate，并且没有上述的子树问题限制。</li>\n<li>在 React 中，所有的组件的渲染功能都依靠 JSX。JSX 是使用 XML 语法编写JavaScript 的一种语法糖。Vue 也提供了渲染函数，甚至支持 JSX。然而，我们默认推荐的还是HTML模板。</li>\n<li>Vue 提供了 Vue-cli 脚手架，能让你非常容易地构建项目，包含了 Webpack，Browserify，甚至 no build system。React 在这方面也提供了 create-react-app，但是现在还存在一些局限性：它不允许在项目生成时进行任何配置，而 Vue 支持 Yeoman-like 定制。它只提供一个构建单页面应用的单一模板，而 Vue 提供了各种用途的模板。它不能用用户自建的模板构建项目，而自建模板对企业环境下预先建立协议是特别有用的。</li>\n<li>Vue 和 React 都提供了强大的路由来应对大型应用。Vue 的路由库和状态管理库都是由官方维护支持且与核心库同步更新的。React 则是选择把这些问题交给社区维护，因此创建了一个更分散的生态系统。但相对的，React 的生态系统相比 Vue 更加繁荣。</li>\n</ul>\n</section></template>\n\n","import { render } from \"./2018-10-16-Vue.md?vue&type=template&id=4ba86980\"\nconst script = {}\nscript.render = render\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Block.vue?vue&type=style&index=0&id=7d6bf770&scoped=true&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Pagination.vue?vue&type=style&index=0&id=d6a35aac&scoped=true&lang=scss\"","<template><section><!-- ---\ntitle: 《Clustering by fast search and find of density peaks》阅读\ndate: 2016-11-20 \ntags: 算法, 文本分类\n--- -->\n<h3>聚类算法介绍</h3>\n<p>聚类是将数据对象的集合分成相似的对象类的过程。使得同一个簇（或类）中的对象之间具有较高的相似性，而不同簇中的对象具有较高的相异性。按照聚类的尺度，聚类方法可被分为以下三种：基于距离的聚类算法、基于密度的聚类方法、基于互连性的聚类算法。其中基于距离的聚类算法是用各式各样的距离来衡量数据对象之间的相似度。基于密度的聚类算法主要是依据合适的密度函数等。基于互连性的聚类算法通常基于图或超图模型，将高度连通的对象聚为一类。</p>\n<p>本文介绍的是Alex Rodriguez和Alessandro Laio在Science上发表的《<a href=\"http://science.sciencemag.org/content/344/6191/1492\">Clustering by fast search and find of density peaks</a>》所提出的一种新型的基于密度的聚类算法。</p>\n<h3>算法思想</h3>\n<p>该算法的假设类簇的中心由一些局部密度比较低的点围绕, 并且这些点距离其他有高局部密度的点的距离都比较大.首先定义两个值：局部密度ρi以及到高局部密度点的距离δi，这两个值仅仅取决于两点之间的距离dij，且该距离满足三角不等式<br>\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-11-20/image1.png\" alt></p>\n<p>其中dc是一个截断距离, 是一个超参数.所以ρi相当于距离点i的距离小于dc的点的个数.由于该算法只对ρi的相对值敏感,\n所以对dc的选择比较鲁棒, δi用于描述点i到其他较高密度点之间的最小距离：<br>\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-11-20/image2.png\" alt></p>\n<p>对于密度最大的点, 设置δi=maxj(dij).只有那些密度是局部或者全局最大的点才会远大于正常的相邻点间距.因此聚类中心被视为是δi值异常最大的点。</p>\n<h3>聚类过程</h3>\n<p>那些有着比较大的局部密度ρi和很大的δi的点被认为是类簇的中心. 局部密度较小但是δi较大的点是异常点.在确定了类簇中心之后, 所有其他点属于距离其最近的类簇中心所代表的类簇.具体的聚类过程可以从图1中看到，A图标识二维空间内的28个点，可以看到1和10两个点的密度最大，因此1和10被定义为聚类中心。右图是以ρi和为横坐标, 以δi为纵坐标, 这种图称作决策图。其中9和10两个点ρi值相似，但δi值却差异很大，因此9被归为点1的类簇，而10被归为另一类簇。所以，只有较高δi值和相对较高ρi值的点才会被视为聚类中心。26, 27, 28三个点的δi也比较大, 但是ρi较小, 所以是异常点.\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-11-20/image3.png\" alt></p>\n<p>聚类中心确定之后，剩余点被分配给与其具有较高密度的最近邻居相同的类簇。与其他迭代优化的聚类算法不同，类簇分配在单个步骤中执行。在聚类分析中, 通常需要确定每个点划分给某个类簇的可靠性. 在该算法中, 可以首先为每个类簇定义一个边界区域(border region), 亦即划分给该类簇但是距离其他类簇的点的距离小于dc的点. 然后为每个类簇找到其边界区域的局部密度最大的点, 令其局部密度为  . 该类簇中所有局部密度大于  的点被认为是类簇核心的一部分(亦即将该点划分给该类簇的可靠性很大), 其余的点被认为是该类簇的光晕, 亦即可以认为是噪音\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-11-20/image4.png\" alt></p>\n<p>图A表示点分布，其中包含非球形点集和双峰点集。B和C分别表示4000和1000个点按照A中模式的分布，其中点根据其被分配的不同类簇着色，黑色的点属于类簇光晕。D和E是对应的决策图，而F表示的是不同点量下不正确聚类点的比率，误差线代表平均值的标准差</p>\n<h3>聚类结果</h3>\n<p>图3是分别利用点集和Olivetti脸部图片集的聚类结果\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-11-20/image5.png\" alt></p>\n<h3>算法特点</h3>\n<p>算法具有以下特点：</p>\n<p>A．\t该算法是一种基于密度的聚类算法，核心思想是认为类簇的中心由一些局部密度比较低的点围绕, 并且这些点距离其他有高局部密度的点的距离都比较大。</p>\n<p>B．\t该算法将非聚类中心点的聚类过程分离成一个单独的进程。使得聚类中心的选择和非聚类点的归类分离开来，增大了聚类精度。</p>\n<p>C．\t该算法适用于图片、非球形点集的聚类。</p>\n</section></template>\n\n","import { render } from \"./2016-11-20-Cluster Paper Reading.md?vue&type=template&id=b925e082\"\nconst script = {}\nscript.render = render\n\nexport default script","<template>\n    <article v-if=\"post\">\n        <h1 @click=\"tapPost(post.name)\">{{post.title}}</h1>\n        <div class=\"abstract\">{{post.abstract}}</div>\n        <a @click=\"tapPost(post.name)\">点我阅读更多...</a>\n        <div class=\"footer\">\n            <div class=\"footer-tags\">\n                <div class=\"blog-tag\" v-for=\"tag in post.tags\" :key=\"tag\" :tag=\"tag\" @click=\"tapTag(tag)\">{{tag}}</div>\n            </div>\n            <span>{{post.date}}</span>\n        </div>\n    </article>\n</template>\n\n<script lang=\"ts\">\nimport { toTop } from '@/utils/tool/Tool'\nimport { defineComponent } from 'vue'\nimport { useRouter } from 'vue-router'\n\nexport default defineComponent({\n    props: [\"post\"],\n    setup() {\n        const router = useRouter()\n        const tapPost = (name:string) =>{\n            toTop()\n            router.push(`/post?file=${name}`)\n        }\n        const tapTag = (tag:string) => {\n            toTop()\n            router.push(`/tag?tag=${tag}`)\n        }\n        return {\n            tapTag,\n            tapPost\n        }\n    }\n})\n</script>\n\n<style scoped lang=\"scss\">\narticle {\n    padding-bottom: 1.3rem;\n    margin: 2.6rem 0 1rem 0;\n    &:not(:last-child) {\n        border: 0 solid $line-grey;\n        border-bottom-width: 1px;\n    }\n    h1 {\n        font-size: $font-size-header-list;\n        color: $font-dark-grey;\n        font-weight: $font-weight-bold;\n        margin: .5rem 0;\n        cursor: pointer;\n    }\n    .abstract {\n        font-size: $font-size-h5-excerpt;\n        line-height: $line-height-large;\n        word-wrap: break-word;\n        word-break: break-all;\n    }\n    a {\n        text-decoration: none;\n        color: $link-red;\n        font-size: $font-size-h5-excerpt;\n        font-weight: $font-weight-bold;\n        cursor: pointer;\n    }\n    .footer {\n        @include flex-center(vert);\n        margin: .8rem 0;\n        &-tags {\n            flex: 1;\n            width: 0;\n        }\n        span {\n            color: $font-mid-grey;\n            margin: 0 0 0 .6rem;\n            flex-shrink: 0;\n        }\n    }\n}\n</style>\n","\nimport { toTop } from '@/utils/tool/Tool'\nimport { defineComponent } from 'vue'\nimport { useRouter } from 'vue-router'\n\nexport default defineComponent({\n    props: [\"post\"],\n    setup() {\n        const router = useRouter()\n        const tapPost = (name:string) =>{\n            toTop()\n            router.push(`/post?file=${name}`)\n        }\n        const tapTag = (tag:string) => {\n            toTop()\n            router.push(`/tag?tag=${tag}`)\n        }\n        return {\n            tapTag,\n            tapPost\n        }\n    }\n})\n","import { render } from \"./Block.vue?vue&type=template&id=7d6bf770&scoped=true\"\nimport script from \"./Block.vue?vue&type=script&lang=ts\"\nexport * from \"./Block.vue?vue&type=script&lang=ts\"\n\nimport \"./Block.vue?vue&type=style&index=0&id=7d6bf770&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-7d6bf770\"\n\nexport default script","<template><section><!-- ---\ntitle: 微信小程序插件初探\ndate: 2019-07-16\ntags: 微信小程序\n--- -->\n<p><span style=\"color:blue;\">|导语</span>  微信小程序生态日益完善，小程序提供的功能服务越来越多，类目覆盖面越来越广，服务共享成为小程序生态中必不可少的一环。小程序自 1.9.6 基础库版本开始支持插件支持服务功能的封装和共享，在小程序官方文档中，给出了插件的具体定义：</p>\n<blockquote>\n<p>插件是一组对js接口、自定义组件或页面的封装，用于嵌入到小程序中使用。</p>\n</blockquote>\n<p>对于开发者，插件调用方在使用插件时，无法看到插件的代码，插件能够用来封装功能或服务，提供给第三方小程序进行展示或者使用，扩大服务使用场景和受众范围。对于使用者，无需特殊申请类目资质，或搭建全套服务架构，就能够通过插件调用开发者所提供的服务丰富自身能力，例如接入好物推荐，在线客服，名片分享，接入WIFI等插件服务。那么开发者又该如何着手插件的开发，开发中又有什么地方需要特别关注呢？</p>\n<h3>一. 插件的开发</h3>\n<h4>1. 插件的开发</h4>\n<p>开发者开发插件前需要在已经注册号的小程序管理后台开通插件功能，填写插件基本信息、插件开发信息后，在开发者工具“开发类型”中选择“插件”即可创建插件项目<a href=\"%5Bhttps://developers.weixin.qq.com/miniprogram/introduction/plugin.html#%E5%BC%80%E5%8F%91%E6%8F%92%E4%BB%B6%5D(https://developers.weixin.qq.com/miniprogram/introduction/plugin.html#%E5%BC%80%E5%8F%91%E6%8F%92%E4%BB%B6)\">[插件开通及创建项目指引]</a>，新建后的插件项目将包含三个目录，以好物圈提供的“好物推荐”插件为例，创建的插件项目包含的目录及主要内容如下图所示：</p>\n<p><img src=\"https://zhangmingemma.github.io/dist/images/2019-07-16/20190716image1.png\" alt=\"好物推荐插件 (2)\"></p>\n<p>可以看到插件项目包含<code v-pre>doc</code>、<code v-pre>miniProgram</code>、<code v-pre>plugin</code>三个目录：</p>\n<ul>\n<li>\n<p><code v-pre>doc</code>目录：插件开发文档</p>\n<ul>\n<li>插件文档必须放置在插件项目根目录中的 <code v-pre>doc</code> 目录下，入口文件是 <code v-pre>doc/README.md</code></li>\n<li>插件开发文档需要详细列明插件使用者需知的内容，对插件申请条件、插件提供的自定义组件、页面、接口等进行必要的描述和解释，方便第三方小程序正确使用插件；</li>\n<li>插件引用到的图片资源不能是网络图片，且必须放到doc目录下，同时为保证插件安全，文档中的链接只能链接到微信开发者社区、微信公众平台、GitHub。</li>\n</ul>\n</li>\n<li>\n<p><code v-pre>miniProgram</code>目录：示例小程序，方便调试插件、预览和审核</p>\n<ul>\n<li>示例小程序中需要引用插件，并在页面中引用插件中的组件来调用插件提供的能力服务；</li>\n<li>除非<code v-pre>miniprogramRoot</code>指定目录为miniProgram，否则miniProgram中的文件内容不会上传</li>\n</ul>\n</li>\n<li>\n<p><code v-pre>plugin</code>目录：插件代码目录</p>\n<ul>\n<li>插件中组件和页面的编写方式与自定义组件相同，包含<code v-pre>json</code>、<code v-pre>js</code>、<code v-pre>wxss</code>、<code v-pre>wxml</code>四个文件组成；</li>\n<li>插件中可以定义任意数量的自定义组件，这些组件在插件内可以相互引用，但提供给第三方小程序使用的组件必须在配置文件中给出；</li>\n<li>插件也可以export一些js接口，但提供给第三方小程序使用的接口也必须在配置文件中给出；</li>\n<li><strong>插件开发者需要提供插件调用失败、插件调用参数错误、插件调用参数疏漏等特殊情况的错误码和错误信息，以便插件使用者正确使用插件</strong>。</li>\n<li>插件包会计入小程序总包的大小，所以插件开发者需要尽量控制插件的大小，避免不必要的逻辑和样式</li>\n</ul>\n</li>\n<li>\n<p><code v-pre>project.config.json</code>文件：</p>\n<ul>\n<li><code v-pre>miniprogramRoot</code>中指定的目录内容将会在插件上传时作为插件使用Demo一起上传，这个Demo会覆盖到插件的所有使用场景，便于插件的审核</li>\n<li><code v-pre>compileType</code>字段表示项目编译类型，只有当<code v-pre>compileType == 'plugin'</code> 时才能正常使用插件项目，<code v-pre>miniProgram</code>中引用的<code v-pre>plugin.version</code>才可以等于<code v-pre>dev</code></li>\n</ul>\n</li>\n</ul>\n<p>针对具体功能的开发实现，插件有其局限性，具体内容将在<span style=\"color:blue\">三. 插件的限制</span>中详细介绍。此外，插件的开发也有其需要特殊注意的地方，特别是在基础库版本、页面跳转、网络请求三个方面：</p>\n<p><strong>1）基础库版本</strong></p>\n<p>目前基础调试库版本已经更新至2.8.0，微信开发者工具针对2.2.2以下的版本会报错提示“🔥请将调试基础库上调到2.2.2以上”，因此插件的开发需要选择基础库 &gt; 2.2.2。</p>\n<p><strong>2）页面跳转</strong></p>\n<img src=\"https://zhangmingemma.github.io/dist/images/2019-07-16/20190716image2.png\" style=\"height:450px;text-align:center;\">\n<p>在插件的开发中常常会涉及到三种情况下的跳转，插件内跳转、插件间跳转和插件与小程序间跳转，都可以使用<a href=\"https://developers.weixin.qq.com/miniprogram/dev/component/navigator.html\"><code v-pre>navigator</code></a>组件和<a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateTo.html\"><code v-pre>wx.navigateTo</code></a>API来实现，但<strong>只有页面栈顶是插件页面的时候才可以调用<code v-pre>wx.navigateTo</code>来实现，且页面栈内不得高于10层</strong></p>\n<ul>\n<li>\n<p>插件内跳转：</p>\n<ul>\n<li>\n<p>基础库版本 &lt; 2.1.0，插件内不支持使用页面</p>\n</li>\n<li>\n<p>基础库版本 2.1.0 ~ 2.2.2，插件内页面跳转需要设置目标页面的url，例如\n<code v-pre>plugin-private://PLUGIN_APPID/PATH_TO/PAGE</code></p>\n<pre v-pre><code v-pre class=\"language-javascript\">wx.navigateTo({\n    <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">`plugin-private://<span class=\"hljs-subst\">${<span class=\"hljs-keyword\">this</span>.data.pluginAppid}</span>/pages/about/about`</span>,\n})\n</code></pre>\n</li>\n<li>\n<p>基础库版本 &gt; 2.2.2，插件内页面跳转可以使用相对路径作为目标页面的url</p>\n<pre v-pre><code v-pre class=\"language-javascript\">wx.navigateTo({\n    <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">`../about/about`</span>,\n})\n</code></pre>\n</li>\n</ul>\n</li>\n<li>\n<p>插件间跳转</p>\n<ul>\n<li>\n<p>插件不能直接引用其他插件，也不能直接跳转至其他插件，但当小程序同时引用了插件A和插件B，插件A、B可以互相跳转与引用，使用方法如下：</p>\n<pre v-pre><code v-pre class=\"language-json\"><span class=\"hljs-comment\">// 小程序app.json引用两个插件</span>\n<span class=\"hljs-string\">\"plugins\"</span>:  {\n  <span class=\"hljs-attr\">\"APlugin\"</span>: {\n    <span class=\"hljs-attr\">\"version\"</span>: <span class=\"hljs-string\">\"dev\"</span>,\n    <span class=\"hljs-attr\">\"provider\"</span>: <span class=\"hljs-string\">\"wx046...\"</span>\n  },\n  <span class=\"hljs-attr\">\"BPlugin\"</span>: {\n    <span class=\"hljs-attr\">\"version\"</span>: <span class=\"hljs-string\">\"1.1.0\"</span>,\n    <span class=\"hljs-attr\">\"provider\"</span>: <span class=\"hljs-string\">\"wx047...\"</span> \n  }\n}\n\n<span class=\"hljs-comment\">// 插件A页面index要跳转到插件B pages/test/test，首先要在插件A index.json中定义</span>\n<span class=\"hljs-string\">\"usingComponents\"</span>: {\n  <span class=\"hljs-attr\">\"test\"</span>: <span class=\"hljs-string\">\"plugin-private://BPlugin_APPID/pages/test/test\"</span>\n}\n</code></pre>\n<pre v-pre><code v-pre class=\"language-html\">// 插件A页面index中定义\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">navigator</span> <span class=\"hljs-attr\">url</span>=<span class=\"hljs-string\">\"plugin-private://BPlugin_APPID/pages/test/test\"</span> &gt;</span>跳转<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">navigator</span>&gt;</span>\n</code></pre>\n</li>\n<li>\n<p><code v-pre>navigator</code>组件和<code v-pre>usingComponents</code>定义中必须严格指定插件页面的路径，否则将会报错<code v-pre>Component is not found in path &quot;plugin-private://BPlugin_APPID/pages/test/test&quot;</code></p>\n</li>\n</ul>\n</li>\n<li>\n<p>插件与小程序间跳转：</p>\n<ul>\n<li>小程序跳转至插件：小程序页面的页面栈顶不是插件页面，不满足插件页面跳转的必要条件，因此无法调用<code v-pre>wx.navigateTo</code>跳转至插件页面，可以使用<code v-pre>navigator</code>组件实现跳转</li>\n<li>插件跳转至小程序：鉴于插件API的限制，不能调用<code v-pre>wx.navigateToMiniProgram</code>实现插件跳转至小程序，可以使用<code v-pre>navigator</code>组件或<code v-pre>wx.navigateTo</code>实现跳转，若使用<code v-pre>wx.navigateTo</code> API时同样需要满足<strong>页面栈顶是插件页面</strong>的条件。</li>\n</ul>\n</li>\n</ul>\n<p><strong>3） 网络请求</strong></p>\n<p>插件在使用<a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/network/request/wx.request.html\"><code v-pre>wx.request</code></a>API发送网络请求时，将会额外携带一个签名<code v-pre>HostSign</code>，用于验证请求来源于小程序插件，这个签名位于请求头中，形如：</p>\n<pre v-pre><code v-pre class=\"language-json\">X-WECHAT-HOSTSIGN: {\n  <span class=\"hljs-attr\">\"noncestr\"</span>:<span class=\"hljs-string\">\"NONCESTR\"</span>, \n  <span class=\"hljs-attr\">\"timestamp\"</span>:<span class=\"hljs-string\">\"TIMESTAMP\"</span>, \n  <span class=\"hljs-attr\">\"signature\"</span>:<span class=\"hljs-string\">\"SIGNATURE\"</span>\n}\n</code></pre>\n<p>其中，<code v-pre>NONCESTR</code>是一个随机字符串，<code v-pre>TIMESTAMP</code>是生成这个随机字符串和<code v-pre>SIGNATURE</code>的UNIX时间戳，他们是生成<code v-pre>SIGNATURE</code>的参数，签名算法为：</p>\n<pre v-pre><code v-pre class=\"language-javascript\">SIGNATURE = sha1([APPID, NONCESTR, TIMESTAMP, TOKEN].sort().join(<span class=\"hljs-string\">''</span>))\n</code></pre>\n<p>其中，主要参数：</p>\n<ul>\n<li>\n<p><code v-pre>APPID</code>是所在小程序的AppId，可以从请求头的referrer中获得：</p>\n<p>网络请求的referrer格式固定为<code v-pre>https://servicewechat.com/{appid}/{version}/page-frame.html</code>，其中{appid}为小程序的appid，{version}为小程序的版本号，版本号为0表示为开发版、体验版以及审核版本，版本号为<code v-pre>devtools</code>表示为开发者工具，其余为正式版本。</p>\n</li>\n<li>\n<p><code v-pre>TOKEN</code>是插件TOKEN，可以在小程序插件 --&gt; 基本设置中找到。</p>\n</li>\n<li>\n<p>自基础库版本 2.0.7 开始，小程序运行期间，网络状况正常时，<code v-pre>NONCESTR</code>和<code v-pre>TIMESTAMP</code>每10分钟变更一次，如有必要，可以通过判断<code v-pre>TIMESTAMP</code>判断当前的签名是否有效。</p>\n</li>\n</ul>\n<p>插件开发者可以在服务器上按照以下步骤校验签名：</p>\n<ul>\n<li><code v-pre>sort</code>对<code v-pre>APPID</code>、<code v-pre>NONCESTR</code>、<code v-pre>TIMESTAMP</code>、<code v-pre>TOKEN</code>四个值表示成字符串形式，按照字典序排序</li>\n<li><code v-pre>join</code>将排好序的四个字符串直接连接在一起</li>\n<li>对连接结果使用<code v-pre>sha1</code>算法，结果即为<code v-pre>SIGNATURE</code></li>\n</ul>\n<p>插件开发者为保证插件的安全性，可以按照以下步骤校验调用方：</p>\n<ul>\n<li>服务器依据使用者小程序AppId判别是否具备插件调用权限，如不具备则拒绝调用</li>\n<li>服务器依据签名判别请求签名是否有效，无效则拒绝返回错误码</li>\n</ul>\n<h4>2. 插件的发布</h4>\n<p>通过微信开发者工具预览验证后即可准备发布，可以按照以下步骤上传和发布插件：</p>\n<ul>\n<li>**选择上传配置：**在微信开发者工具中配置&quot;上传代码时自动压缩混淆&quot;、“上传代码时进行代码保护”等项目，以压缩插件代码，及保护插件代码安全（TODO）</li>\n<li>**上传代码：**在微信开发者工具中点击“上传”，填写版本号（即为使用者可以指定的插件版本号），即可上传插件代码</li>\n<li>**上传开发文档：**在“编辑器”中打开开发文档，编辑完成后，可以使用编辑器底部的上传入口上传插件文档，上传后的文档不会立刻发布，需要使用账号密码登录插件管理后台，在 小程序插件 &gt; 基本设置 中预览、发布插件文档，文档发布后，可多次更新修改。</li>\n<li>**提交审核：**上传后即可提交审核，提交审核时需要填写准确的插件服务类目、标签及功能描述，同时服务类目需要满足<a href=\"https://developers.weixin.qq.com/miniprogram/introduction/plugin.html#%E5%BC%80%E6%94%BE%E8%8C%83%E5%9B%B4%E5%8F%8A%E6%9C%8D%E5%8A%A1%E7%B1%BB%E7%9B%AE\">官方开放的类目范围</a>，审核周期一般为7个工作日，审核结果将会通过模板消息、站内信通知管理员。</li>\n<li>**发布新版本：**审核通过后即可发布，发布时需要填写准确的版本更新信息，和支持的最低版本库</li>\n</ul>\n<p>需要注意的是插件没有体验版，可以发布多个线上版本，由使用者决定具体使用的版本号。上传后的插件由小程序框架对每个插件进行数据安全保护，保证他们之间不能窃取其他任何一方的数据，同时插件的逻辑代码也无法被使用方看法，这些都依赖于插件的安全隔离机制（TODO，安全隔离机制具体是啥，是否存在代码加密？）</p>\n<h4>3. 插件的更新</h4>\n<p>按照上一节插件的发布中的步骤，即可发布更新后的插件代码，需要特别注意的是，在发布时，需要关注选项“快速更新”，勾选快速更新后，系统会为插件使用者管理员统一下发模板消息，模板消息中包含快速更新的链接，支持插件版本的快速更新，该次快速更新免审核。</p>\n<p>此外，在插件的更新中需要特别注意的是，为了保证插件更新的稳定性，插件开发者需要保持版本迭代过程中插件所调用数据接口的稳定性。</p>\n<h3>二. 插件的使用</h3>\n<h4>1. 插件的申请</h4>\n<p><img src=\"https://zhangmingemma.github.io/dist/images/2019-07-16/20190716image3.png\" alt=\"图片 2\"></p>\n<p><strong>任何注册的小程序</strong>都可以在小程序后台申请插件，申请后需要等待插件开发者小程序管理员通过后，方可使用插件，如果调用没有通过申请的插件，则使用者小程序白屏，并报错：<span style=\"color:red\">插件申请成功，待审核确认</span>，如果调用未申请的插件，则使用者小程序白屏，并会报错：<span style=\"color:red\">插件未授权</span>。</p>\n<p>同时，插件使用者需要关注插件开发文档中的插件申请条件，若不满足申请条件，插件开发者一般不会通过插件申请。</p>\n<p>一个小程序最多添加5个小程序插件。</p>\n<h4>2. 插件的使用</h4>\n<p><strong>1）插件基本使用方法</strong></p>\n<p>以“好物推荐”插件为例，使用插件可以按照以下几个步骤：</p>\n<ul>\n<li>\n<p>在小程序<code v-pre>app.json</code>文件中引用插件：</p>\n<!-- <img src=\"https://zhangmingemma.github.io/dist/images/2019-07-16/20190716image4.png\" style=\"width:600px;border:1px solid #ededed\"/> -->\n</li>\n<li>\n<p>在引用插件组件的页面中引用插件组件：</p>\n<img src=\"https://zhangmingemma.github.io/dist/images/2019-07-16/20190716image5.png\" style=\"width:600px;border:1px solid #ededed\">\n</li>\n<li>\n<p>在引用插件组件的页面中写入插件组件：</p>\n<img src=\"https://zhangmingemma.github.io/dist/images/2019-07-16/20190716image6.png\" style=\"width:600px;border:1px solid #ededed\">\n</li>\n<li>\n<p>在引用插件组件的页面中定义插件所需参数，即可使用插件</p>\n</li>\n<li>\n<p>为保证小程序正常运行，插件使用者需要针对插件调用失败等特殊情况做兜底逻辑</p>\n</li>\n</ul>\n<p>如果插件只在一个分包内用到，可以将插件仅放在这个分包内，例如：\n<img src=\"https://zhangmingemma.github.io/dist/images/2019-07-16/20190716image7.png\" style=\"width:600px;border:1px solid #ededed\"></p>\n<p>但分包内使用插件有如下限制：</p>\n<ul>\n<li>在分包内使用的插件仅能在分包内使用；</li>\n<li>同一个插件不能被多个分包同时引用；</li>\n<li>不能从分包外的页面直接跳入分包内的插件页面，需要先跳入分包内的非插件页面，再跳入同一分包内的插件页面</li>\n</ul>\n<p><strong>2）依赖版本</strong></p>\n<ul>\n<li>引用的插件版本不被支持，即引用的插件版本号 &lt;最低可用版本号，或 &gt;最新版本号，使用者小程序白屏，并报错“插件版本不存在”</li>\n<li>公共库版本 &lt; 2.2.2，无法正常使用插件，并调试工具报错“将版本更新至🔥请将调试基础库上调到2.2.2以上”</li>\n<li>（TODO：真机测试公共库版本）</li>\n</ul>\n<p><strong>3）其他</strong></p>\n<ul>\n<li>插件使用方计算代码包大小时会合并计入引用的插件大小，因此如果插件只有一个分包使用，可以尽量将插件放在分包下</li>\n<li>插件开发者可以获得因为引用插件而传入的数据，为保护数据安全，要关注插件开发文档中的参数要求，避免传入不必要的数据</li>\n</ul>\n<h4>3. 插件的更新</h4>\n<p>若小程序开发者发布小程序时勾选了“快速更新”选项，则插件使用者小程序管理员会在微信收到模板消息，并附有“快速更新”的链接，可以实现一键更新小程序中引用的插件版本，同时该次更新不必审核。</p>\n<h3>三. 插件的限制</h3>\n<h4>1. 调用API的限制</h4>\n<p>插件可以调用的 API 与小程序不同，主要有两个区别：</p>\n<ul>\n<li>插件的请求域名列表与小程序相互独立；</li>\n<li>一些 API 不允许插件调用（这些函数不存在于 <code v-pre>wx</code> 对象下）。</li>\n</ul>\n<p>允许插件调用的API及其对应版本要求列表可参考<a href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/plugin/api-limit.html\">官方说明</a>，若在插件中调用了不支持的API，监听fail回调，可获得错误信息为<code v-pre>getUserInfo:fail 系统错误，错误码：-12015,system error</code>。有些接口，例如<code v-pre>wx.login</code>、<code v-pre>wx.getUserInfo</code>、虽然在插件中不能使用，但可以通过插件功能页来达到目的，例如用户信息功能页、支付功能以及收货地址功能：</p>\n<ul>\n<li>\n<p><a href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/plugin/functional-pages/user-info.html\">用户信息功能页</a>：相当于调用<code v-pre>wx.login</code>和<code v-pre>wx.getUserInfo</code>，自基础库2.3.1开始，用户在功能页授权后，插件就可以直接调用<code v-pre>wx.login</code>和<code v-pre>wx.getUserInfo</code>无需再次进入功能页获取信息，自基础库版本2.6.3起，可以使用<code v-pre>wx.getSetting</code>查询用户是否授权过。用户信息功能页相关开发可按照如下步骤：</p>\n<ul>\n<li>\n<p>在插件页面中引用<code v-pre>functional-page-navigator</code></p>\n<img src=\"https://zhangmingemma.github.io/dist/images/2019-07-16/20190716image8.png\" style=\"width:600px;border:1px solid #ededed\">\n</li>\n<li>\n<p>在插件页面中声明用户信息获取成功的回调</p>\n<img src=\"https://zhangmingemma.github.io/dist/images/2019-07-16/20190716image9.png\" style=\"width:600px;border:1px solid #ededed\">\n</li>\n<li>\n<p>即可使用用户信息\n<img src=\"https://zhangmingemma.github.io/dist/images/2019-07-16/20190716image10.png\" style=\"width:600px;border:1px solid #ededed\"></p>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/plugin/functional-pages/request-payment.html\">支付功能页</a>：相当于调用<code v-pre>wx.requestPayment</code>的功能，支付功能页的使用与用户信息功能页类似，<code v-pre>function-page-navigator</code>参数<code v-pre>name=requestPayment</code>。<strong>需要注意的是插件使用支付功能，需要在管理后台 小程序插件 -&gt; 基本设置 -&gt; 支付能力”设置项中。另外，无论是否通过申请，主体为个人小程序在使用插件时，都无法正常使用插件里的支付功能。</strong></p>\n</li>\n<li>\n<p><a href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/plugin/functional-pages/choose-address.html\">收货地址功能页</a>：相当于调用<a href=\"https://developers.weixin.qq.com/miniprogram/dev/api/open-api/address/wx.chooseAddress.html\"><code v-pre>wx.chooseAddress</code></a>的功能，支付功能页的使用与用户信息功能页类似，<code v-pre>function-page-navigator</code>参数<code v-pre>name=chooseAddress</code>。</p>\n<p>​                             <img src=\"https://zhangmingemma.github.io/dist/images/2019-07-16/20190716image11.png\" style=\"width:600px;border:1px solid #ededed\"></p>\n</li>\n</ul>\n<h4>2. 使用组件的限制</h4>\n<p>在插件开发中，以下组件不能在插件页面中使用：</p>\n<ul>\n<li>开放能力（open-type）为以下之一的button：\n<ul>\n<li>contact（打开客服会话）</li>\n<li>getPhoneNumber（获取用户手机号）</li>\n<li>getUserInfo（获取用户信息）</li>\n</ul>\n</li>\n<li><a href=\"https://developers.weixin.qq.com/miniprogram/dev/component/open-data.html\">open-data</a></li>\n<li><a href=\"https://developers.weixin.qq.com/miniprogram/dev/component/web-view.html\">web-view</a></li>\n</ul>\n<p>以下组件的使用对基础库版本有要求：</p>\n<ul>\n<li><a href=\"https://developers.weixin.qq.com/miniprogram/dev/component/navigator.html\">navigator</a> 需要基础库版本 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html\">2.1.0</a></li>\n<li><a href=\"https://developers.weixin.qq.com/miniprogram/dev/component/live-player.html\">live-player</a> 和 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/component/live-pusher.html\">live-pusher</a> 需要基础库版本 <a href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html\">2.3.0</a></li>\n</ul>\n</section></template>\n\n","import { render } from \"./2019-07-16-Miniprogram Plugin.md?vue&type=template&id=489e1ac6\"\nconst script = {}\nscript.render = render\n\nexport default script","<template><section><!-- ---\ntitle: 英文文本预处理-Python NLTK\ndate: 2017-03-29\ntags: 算法, Python\n--- -->\n<p>文本预处理是要文本处理成计算机能识别的格式，是文本分类、文本可视化、文本分析等研究的重要步骤。具体流程包括文本分词、去除停用词、词干抽取(词形还原)、文本向量表征、特征选择等步骤，以消除脏数据对挖掘分析结果的影响。</p>\n<p>本文仅针对英文文本，中文文本暂时还没有研究过。介绍的全部都是基于Python2.7，利用NLTK库进行文本分类的过程。</p>\n<h3>文本分词</h3>\n<p>文本分词即将文本拆解成词语单元，英文文本以英文单词空格连接成句，分词过程较为简单。以下介绍几种方法。</p>\n<p><strong>正则表达式分词</strong></p>\n<p>以空格进行分词</p>\n<pre v-pre><code v-pre>&gt;&gt;&gt; import re\n&gt;&gt;&gt; text = 'I was just a kid, and loved it very much! What a fantastic song!'\n&gt;&gt;&gt; print re.split(r' ',text)\n\n['I', 'was', 'just', 'a', 'kid,', 'and', 'loved', 'it', 'very', 'much!', 'What', 'a', 'fantastic', 'song!']\n</code></pre>\n<p>re匹配符号进行分词</p>\n<pre v-pre><code v-pre>&gt;&gt;&gt; print re.split(r'\\W+', text)\n\n['I', 'was', 'just', 'a', 'kid', 'and', 'loved', 'it', 'very', 'much', 'What', 'a', 'fantastic', 'song', '']\n</code></pre>\n<pre v-pre><code v-pre>&gt;&gt;&gt; print re.findall(r'\\w+|\\S\\w*', text)\n\n['I', 'was', 'just', 'a', 'kid', ',', 'and', 'loved', 'it', 'very', 'much', '!', 'What', 'a', 'fantastic', 'song', '!']\n</code></pre>\n<pre v-pre><code v-pre>&gt;&gt;&gt; print re.findall(r&quot;\\w+(?:[-']\\w+)*|'|[-.(]+|\\S\\w*&quot;, text)\n\n['I', 'was', 'just', 'a', 'kid', ',', 'and', 'loved', 'it', 'very', 'much', '!', 'What', 'a', 'fantastic', 'song', '!']\n</code></pre>\n<p>NLTK正则表达式分词器</p>\n<pre v-pre><code v-pre>&gt;&gt;&gt; import re\n&gt;&gt;&gt; import nltk\n&gt;&gt;&gt; text = 'I was just a kid, and loved it very much! What a fantastic song!'\n&gt;&gt;&gt; pattern = r&quot;&quot;&quot;(?x)                   # set flag to allow verbose regexps \n\t              (?:[A-Z]\\.)+           # abbreviations, e.g. U.S.A. \n\t              |\\d+(?:\\.\\d+)?%?       # numbers, incl. currency and percentages \n\t              |\\w+(?:[-']\\w+)*       # words w/ optional internal hyphens/apostrophe \n\t              |\\.\\.\\.                # ellipsis \n\t              |(?:[.,;&quot;'?():-_`])    # special characters with meanings \n\t            &quot;&quot;&quot; \n&gt;&gt;&gt; print nltk.regexp_tokenize(text, pattern)\n\n['I', 'was', 'just', 'a', 'kid', ',', 'and', 'loved', 'it', 'very', 'much', 'What', 'a', 'fantastic', 'song']\n</code></pre>\n<p><strong>最大匹配算法（MaxMatch）分词</strong></p>\n<p>MaxMatch算法在中文自然语言处理中常常用来进行分词（或许从名字上你已经能想到它是基于贪婪策略设计的一种算法），算法从右侧开始逐渐减少字符串长度，以此求得可能匹配到nltk字库中词语的最大长度的字符串。这种方法其实更常用于中文文本分词，但是不排除某些英文文本并不以空格作为分隔符，特此介绍一下</p>\n<pre v-pre><code v-pre>&gt;&gt;&gt; import nltk\n&gt;&gt;&gt; from nltk.corpus import words  \n&gt;&gt;&gt; wordlist = set(words.words())   \n&gt;&gt;&gt; def max_match(text):  \n    pos2 = len(text)  \n    result = ''  \n    while len(text) &gt; 0:         \n        word = text[0:pos2]\n        if word in wordlist:  \n            result = result + text[0:pos2] + ' '  \n            text = text[pos2:]  \n            pos2 = len(text)  \n        else:  \n            pos2 = pos2-1                 \n    return result[0:-1]  \n&gt;&gt;&gt; string = 'theyarebirds'  \n&gt;&gt;&gt; print(max_match(string))\n\nthey are bird s\n</code></pre>\n<h3>停用词去除</h3>\n<p>简单易懂，匹配词库中的停用词，去除！以消除冠词、连词等一些无意义无作用的词增加数据占用空间，并避免其为挖掘计算带来的干扰。</p>\n<p><strong>NLTK停用词库</strong></p>\n<pre v-pre><code v-pre>&gt;&gt;&gt; import nltk\n&gt;&gt;&gt; from nltk.corpus import stopwords\n&gt;&gt;&gt; stopworddic = set(stopwords.words('english'))  \n&gt;&gt;&gt; text = ['I', 'was', 'just', 'a', 'kid',  'and', 'loved', 'it', 'very', 'much', 'What', 'a', 'fantastic', 'song']\n&gt;&gt;&gt; text = [i for i in text if i not in stopworddic ]\n&gt;&gt;&gt; print text\n　　\n['I', 'kid', 'loved', 'much', 'What', 'fantastic', 'song']\n</code></pre>\n<p><strong>自定义词库</strong></p>\n<p>方法同上，自定义停用词，或者下载网络上的停用词库进行停用词去除</p>\n<h3>词干抽取</h3>\n<p>将文本列表中的词语抽取其词干，以统一特征表征形式，特征降维以减少计算量。NLTK中提供了三种最常用的词干提取器接口，即 Porter stemmer, Lancaster Stemmer 和 Snowball Stemmer。抽取词的词干或词根形式（不一定能够表达完整语义）</p>\n<pre v-pre><code v-pre>&gt;&gt;&gt; from nltk.stem.porter import PorterStemmer  \n&gt;&gt;&gt; porter_stemmer = PorterStemmer()  \n\n&gt;&gt;&gt; from nltk.stem.lancaster import LancasterStemmer  \n&gt;&gt;&gt; lancaster_stemmer = LancasterStemmer()  \n\n&gt;&gt;&gt; from nltk.stem import SnowballStemmer  \n&gt;&gt;&gt; snowball_stemmer = SnowballStemmer(“english”)  \n\n&gt;&gt;&gt; porter_stemmer.stem(‘maximum’)  \nu’maximum’  \n&gt;&gt;&gt; lancaster_stemmer.stem(‘maximum’)  \n‘maxim’  \n&gt;&gt;&gt; snowball_stemmer.stem(‘maximum’)  \nu’maximum’  \n\n&gt;&gt;&gt; porter_stemmer.stem(‘presumably’)  \nu’presum’  \n&gt;&gt;&gt; snowball_stemmer.stem(‘presumably’)  \nu’presum’  \n&gt;&gt;&gt; lancaster_stemmer.stem(‘presumably’)  \n‘presum’  \n\n&gt;&gt;&gt; porter_stemmer.stem(‘multiply’)  \nu’multipli’ \n&gt;&gt;&gt; snowball_stemmer.stem(‘multiply’)  \nu’multipli’  \n&gt;&gt;&gt; lancaster_stemmer.stem(‘multiply’)  \n‘multiply’ \n\n&gt;&gt;&gt; porter_stemmer.stem(‘provision’)  \nu’provis’  \n&gt;&gt;&gt; snowball_stemmer.stem(‘provision’)  \nu’provis’  \n&gt;&gt;&gt; lancaster_stemmer.stem(‘provision’)  \nu’provid’  \n\n&gt;&gt;&gt; porter_stemmer.stem(‘owed’)  \nu’owe’  \n&gt;&gt;&gt; snowball_stemmer.stem(‘owed’)  \nu’owe’  \n&gt;&gt;&gt; lancaster_stemmer.stem(‘owed’)  \n‘ow’   \n</code></pre>\n<p>各有优劣，看具体文本情况。对于分类、聚类这样对于特征词语的具体形态没有要求的情况下，进行词干抽取虽然抽取后的词干可能无实际意义但是却会大大减少计算时间，提高效率。</p>\n<h3>词形还原</h3>\n<p>词形还原Lemmatization是把一个任何形式的语言词汇还原为一般形式（能表达完整语义）。相对而言，词干提取是简单的轻量级的词形归并方式，最后获得的结果为词干，并不一定具有实际意义。词形还原处理相对复杂，获得结果为词的原形，能够承载一定意义，与词干提取相比，更具有研究和应用价值。</p>\n<pre v-pre><code v-pre>&gt;&gt;&gt; from nltk.stem import WordNetLemmatizer  \n&gt;&gt;&gt; wordnet_lemmatizer = WordNetLemmatizer()  \n&gt;&gt;&gt; word = wordnet_lemmatizer.lemmatize('birds')  \n\nbird\n</code></pre>\n<p>nltk的lemmatization算法很鸡肋，基本可以理解为只有复数还原为单数形式，当然feet这样的非常态复数形式也可以实现，但是你要想形容词变名词，就不太怎么好使了，比如我在实验中geology，geography，geographic，geographical这几个词就无法还原成统一体。</p>\n<h3>文本向量表征以及TF-IDF权重表示</h3>\n<p>这一部分是基于Python的<a href=\"http://radimrehurek.com/gensim/\">Gensim</a>库将文本特征抽取为词袋，并将词袋表征为id,以特征id以及文档频率表征成文本向量。<a href=\"http://baike.baidu.com/link?url=o8wTt7PnzFPnNWbP-sZ3Sn0kzpGVojCsbYQC3bx-86k5KQfVJo55Sxapb4l2ybnuozKf4KY2tSka5GLdrBooSa\">TF-IDF</a>权重是很可靠的权重表征方式，用以评估一字词对于一个文件集或一个语料库中的其中一份文件的重要程度。字词的重要性随着它在文件中出现的次数成正比增加，但同时会随着它在语料库中出现的频率成反比下降。TF-IDF加权的各种形式常被搜索引擎应用，作为文件与用户查询之间相关程度的度量或评级。</p>\n<pre v-pre><code v-pre>#coding:utf-8\nfrom gensim import corpora, models, similarities\n\ndocuments = [&quot;Shipment of gold damaged in a fire&quot;,&quot;Delivery of silver arrived in a silver truck&quot;,&quot;Shipment of gold arrived in a truck&quot;]\n\n#分词#\ntexts = [[word for word in document.lower().split()] for document in documents]\nprint texts\n\n#抽取词袋，将token映射为id\ndictionary = corpora.Dictionary(texts)\nprint dictionary.token2id\n\n#由文档向量以及频率构成文档向量\ncorpus = [dictionary.doc2bow(text) for text in texts]\nprint corpus\n\n#计算tfidf权重,注意在gensim的tfidf算法中到文档频率的求解过程中对数之后+1了\ntfidf = models.TfidfModel(corpus)\ncorpus_tfidf = tfidf[corpus]\nfor doc in corpus_tfidf:\n\tprint doc\nprint tfidf.dfs\nprint tfidf.idfs\n</code></pre>\n<p>除此之外，最近导师推给我的一篇文章Word2vec也是文本向量表征的一种方式，考虑了上下文的语义联系，可以深入研究。</p>\n<h3>特征选择</h3>\n<p>根据研究的需求进行特征的选择已达到特征降维，减小噪音的影响。常见的是根据词频（TF）、倒文档频率（IDF）、TFIDF权重等设定阈值进行筛选，无非是在TF/IDF/TFIDF权重计算结果的基础上设定阈值进行筛检。除此之外互信息、信息增益、X平方统计也是常见的方法。除此之外，如果你的研究是在给定类别名称的前提下进行语义文本分类，那么判断特征词与分类之间的语义相似度，从而进行筛选也是一种可行的方法。这里介绍的便是基于WordNet进行语义相似度的介绍。</p>\n<p>WordNet计算语义相似度常见的包括两种主要方法：\npath_similarity(sense1,sense2) # 词在词典层次结构中的最短路径\nwup_similarity(sense1, sense2) # Wu-Palmer 提出的最短路径</p>\n<pre v-pre><code v-pre>#coding:utf-8\nimport nltk\nfrom nltk.corpus import wordnet as wn\nfrom heapq import *  \nfrom itertools import product\n\nword1 = 'hen'\nword2 = 'chicken'\n\nsense1 = wn.synsets(word1)\nsense2 = wn.synsets(word2)\n\nsim_wup = max(word1.wup_similarity(word2) for (word1, word2) in product(sense1, sense2))\nprint sim_wup\n\nsim_path = max(word1.path_similarity(word2) for (word1, word2) in product(sense1, sense2))\nprint sim_path\n</code></pre>\n<p>运行结果</p>\n<pre v-pre><code v-pre>0.962962962963\n0.5\n</code></pre>\n</section></template>\n\n","import { render } from \"./2017-03-29-Python NLTK.md?vue&type=template&id=de458d58\"\nconst script = {}\nscript.render = render\n\nexport default script","import { reactive, ref, toRefs, watchEffect} from \"@vue/runtime-core\"\nimport PostHandler from \"./PostHandler\"\nimport { intersect, PageConfig, promiseSync } from \"./Tool\"\n\ntype IPost = typeof PostHandler.Post\nclass ListHandler {\n    TotalPost:IPost[] = []\n\n    listCompiler({tags=[], banPagination=false}:{tags?:string[], banPagination?:boolean}={}) {\n        const total = ref<number>(0)\n        const state = reactive({\n            postList: [] as IPost[]\n        })\n        const reloadList = ({tags=[], startIndex=0, endIndex=0}:{tags?:string[], startIndex?:number, endIndex?:number}={}) => {\n            let tagList = this.filterPost({list:this.TotalPost.slice(), tags})\n            total.value = tagList.length\n            state.postList = this.filterPost({\n                list:tagList, \n                startIndex, \n                endIndex\n            })         \n        }\n\n        const { res } = this.getAllPostContent() \n        watchEffect(() => {\n            if (res.value) {\n                this.TotalPost = this.sortPost(res.value.slice())\n                if (banPagination) {\n                    reloadList({tags})\n                } else {\n                    reloadList({tags, endIndex: PageConfig.PageSie})\n                }\n            }\n        })\n\n        return {\n            total,\n            reloadList,\n            ...toRefs(state)\n        }\n    }\n\n    // 根据条件过滤\n    filterPost({list, tags=[], startIndex=0, endIndex=0}:{list:IPost[] ,tags?:string[], startIndex?:number, endIndex?:number}) {\n        let _endIndex = endIndex || list.length\n        let _list = list.slice()\n        if (tags && tags.length) {\n            _list = list.filter((post:IPost) => post && post.tags && intersect(post.tags, tags).length)\n        } \n        return _list.slice(startIndex, _endIndex)\n    }\n\n    // 文章时间升序\n    sortPost(list: IPost[]) {\n        const _list = list.slice()\n        _list.sort((a:IPost,b:IPost) => {\n            const dateA:string = a.date?.replaceAll('-','') || ''\n            const dateB:string = b.date?.replaceAll('-','') || ''\n            return parseInt(dateB) - parseInt(dateA)\n        })\n        return _list\n    }\n\n    // 获取所有文章文件名\n    getAllPostPath() {\n        const files = require.context(\"../../../public/posts\", true, /\\.md/)\n        return files.keys() \n    }\n\n    // 获取所有文章内容\n    getAllPostContent() {\n        if (this.TotalPost.length) {\n            const res = ref<IPost[]>([])\n            res.value = this.TotalPost\n            return {\n                res\n            }\n        }\n        const files = this.getAllPostPath()\n        return promiseSync<IPost[]>(\n            Promise.all(files.map(async (path:string) => {\n                const fileName:string = PostHandler.getPostName(path)\n                const info:IPost = await PostHandler.getPostInfo(fileName)\n                return info\n            }))\n        )\n    }\n\n    // 获取所有文章tag\n    getAllPostTag() {\n        const tagList:string[] = []\n        this.TotalPost.map((post:IPost) => {\n            post.tags?.map((tag:string) => {\n                if (tagList.indexOf(tag) < 0) {\n                    tagList.push(tag)\n                }\n            })\n        })\n        return tagList\n    }\n}\n\nexport default new ListHandler()","\nclass CatalogHandler {\n    CatalogMaxLevels:number = 3\n    CatalogList:string[] | null = []\n    CatalogOffset:null | {\n        left:number, \n        top:number, \n        width:number\n    } = null\n\n    // 获取目录位置\n    getCatalogOffset(reload:boolean=false) {\n        if (!this.CatalogOffset || reload) {\n            const catalogEle:HTMLElement|null = document.getElementById('js-catalog')\n            this.CatalogOffset = {\n                left: catalogEle?.offsetLeft || 0,\n                top: catalogEle?.offsetTop || 0,\n                width: catalogEle?.offsetWidth || 0\n            }\n        }\n        return this.CatalogOffset\n    }\n\n    // 获取当前文章的目录html\n    getCatalogHtml() {\n        let tocs = this.getAllH()!\n        let levelStack:string[] = [] \n        let htmlResult:string = ''\n        this.CatalogList = tocs\n        if(!tocs || !tocs.length) {\n            return htmlResult\n        }\n        tocs.forEach((toc:string, index:number) => {\n            let itemText:string = this.getHText(toc)   //匹配h标签的文字\n            let itemLabel:string = this.getHLabel(toc)    //匹配h标签的级别<h?>\n            let levelIndex:number = levelStack.indexOf(itemLabel)\n            if (levelIndex < 0 ) {\n                if (levelStack.length < this.CatalogMaxLevels) {\n                    levelStack.unshift(itemLabel)\n                    htmlResult += this.addStartUl()\n                    htmlResult += this.addLi(itemText, index)\n                }\n            } \n            else if (levelIndex === 0) {\n                htmlResult += this.addLi(itemText, index)\n            }\n            else {\n                while(levelIndex--) {\n                    levelStack.shift()\n                    htmlResult += this.addEndUl()\n                }\n                htmlResult += this.addLi(itemText, index)\n            }\n        })\n        while(levelStack.length) {\n            levelStack.shift()\n            htmlResult += this.addEndUl()\n        }\n        return htmlResult\n    } \n\n    // 避免vue-router路由变化与a标签锚定冲突\n    anchor(event:any) {\n        if(event?.target.nodeName === 'A') {\n            const href:string = event.target.attributes?.href?.value\n            const anchorName:string = href.substring(1, href.length)\n            let anchorEle = document.getElementById(anchorName)\n            if ( anchorEle ) {\n                anchorEle.scrollIntoView({behavior: \"smooth\"})\n            }\n        }\n    }\n\n    // 获取文章的h标签数组\n    getAllH() {\n        const markdownBody:(HTMLElement | null) = document.getElementById('js-markdown-body')!\n        const tocs:(string[] | null) = markdownBody.innerHTML.match(/<[hH][1-6](\\s.*?)>.*?<\\/[hH][1-6]>/g)\n        return tocs\n    }  \n    \n    // 匹配h标签的级别<h?>\n    getHLabel(toc:string) {\n        const tag = toc.match(/<\\w+?(\\s.*?)>/)?.[0]!\n        return tag.replace(/id=\\\"(.*?)\\\"/,'').replaceAll(/\\s/g,'')\n    }\n\n    // 匹配h标签的文本\n    getHText(toc:string) {\n        return toc.replace(/<[^>]+>/g, '')\n    }\n\n    // 插入标题块起始标签\n    addStartUl() {\n        return `<ul class=\"catalog-list\">`\n    }\n\n    // 插入标题块闭合标签\n    addEndUl() {\n        return `</ul>\\n`\n    }\n\n    // 插入标题行\n    addLi(text:string, index:number) {\n        return `<li class=\"item\"><a href=\"#heading-${index}\" title=\"${text}\">${text}</a></li>\\n`\n    }\n\n    // 设置H标签id， id需要重写，不能包含特殊符号\n    setHId() {  \n        if (!this.CatalogList) return \n        this.CatalogList.map((catalog:string, index:number) => {\n            const text:string = this.getHText(catalog)\n            const label:string = this.getHLabel(catalog)\n            const tagName:string = label.replace('<', '').replace('>', '')\n            const tagEles:HTMLCollection = document.getElementsByTagName(tagName)\n            for(let i=0; i<tagEles.length; i++) {\n                    const tag:any = tagEles[i]\n                    if (tag.innerHTML === text) {\n                            const id:string = `heading-${index}`\n                            tag.setAttribute('id', id)\n                    } \n            }\n        })\n    }\n}\n\nexport default new CatalogHandler()","<template><section><!-- ---\ntitle: GeoServer安装与配置\ndate: 2017-08-31\ntags: GeoServer\n--- -->\n<p>GeoServer是 OpenGIS Web 服务器规范的 J2EE 实现，利用 GeoServer 可以方便的发布地图数据，允许用户对特征数据进行更新、删除、插入操作，通过 GeoServer 可以比较容易的在用户之间迅速共享空间地理信息。它兼容 WMS 和 WFS 特性；支持 PostgreSQL、 Shapefile 、 ArcSDE 、 Oracle 、 VPF 、 MySQL 、 MapInfo ；支持上百种投影；能够将网络地图输出为 jpeg 、 gif 、 png 、 SVG 、 KML 等格式；能够运行在任何基于 J2EE/Servlet 容器之上；嵌入 MapBuilder 支持 AJAX 的地图客户端OpenLayers；除此之外还包括许多其他的特性。</p>\n<p><strong>JAVA环境安装配置</strong></p>\n<ul>\n<li>\n<p>GeoServer需要JAVA环境，所以需要先安装<a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\">JAVA JDK,比如本文下载的是8u152_x64</a>,这里我的安装路径为系统默认的C:\\Program Files\\Java\n<img src=\"https://zhangmingemma.github.io/dist/images/2017-08-31/20170831image1.png\" alt>\n安装之后会存在两个文件包分别是JDK的文件包和JRE的文件包</p>\n</li>\n<li>\n<p>接下来为重要的环境变量配置！！！奉上一个<a href=\"http://blog.csdn.net/tiantang_1986/article/details/53894947\">环境配置链接</a></p>\n</li>\n</ul>\n<p>其中需要设置的环境变量为</p>\n<pre v-pre><code v-pre>JAVA_HOME：C:\\Program Files\\Java\\jre1.8.0_152\nCLASSPATH: .;%JAVA_HOME%\\jdk1.8.0_152\\lib\nPath: %JAVA_HOME%\\jdk1.8.0_152\\bin\n</code></pre>\n<ul>\n<li>cmd命令输入java -version如果出现对应版本号，说明配置成功</li>\n</ul>\n<p><strong>GeoServer安装</strong></p>\n<ul>\n<li>\n<p>首先下载，Stable版本的GeoServer无需安装TomCat等服务器，如果想要用TomCat来运行的话，选择下载Web Archive，不做解释。<a href=\"http://geoserver.org/download/\">GeoServer——Stable</a>\n<img src=\"https://zhangmingemma.github.io/dist/images/2017-08-31/20170831image2.png\" alt></p>\n</li>\n<li>\n<p>安装过程中就按照指令一步步安装就好了，其中需要注意的有：</p>\n</li>\n</ul>\n<p>(1)首先，JRE的路径选择，JRE的路径为上文提到的C:\\Program Files\\Java下的C:\\Program Files\\Java\\jre1.8.0_144\n<img src=\"https://zhangmingemma.github.io/dist/images/2017-08-31/20170831image3.png\" alt></p>\n<p>(2)其次，GeoServer运行端口的选择，以及登录名和密码的设置</p>\n<ul>\n<li>以上都完成了之后，Start GeoServer，成功运行之后，浏览器打开http://localhost:7070/geoserver/web/，输入用户名密码之后便可操作</li>\n</ul>\n<p><strong>利用GeoServer发布WMS</strong></p>\n<ul>\n<li>新建工作区\n<img src=\"https://zhangmingemma.github.io/dist/images/2017-08-31/20171130image1.png\" alt></li>\n</ul>\n<p>命名工作区\n<img src=\"https://zhangmingemma.github.io/dist/images/2017-08-31/20171130image2.png\" alt></p>\n<ul>\n<li>新建数据存储，\n<img src=\"https://zhangmingemma.github.io/dist/images/2017-08-31/20171130image3.png\" alt></li>\n</ul>\n<p>这里选择的是shp文件\n<img src=\"https://zhangmingemma.github.io/dist/images/2017-08-31/20171130image4.png\" alt></p>\n<p>发布该数据\n<img src=\"https://zhangmingemma.github.io/dist/images/2017-08-31/20171130image5.png\" alt></p>\n<p>设置投影，并计算经纬度包围盒\n<img src=\"https://zhangmingemma.github.io/dist/images/2017-08-31/20171130image6.png\" alt></p>\n<ul>\n<li>\n<p>新建样式，这里选择的是sld文件\n<img src=\"https://zhangmingemma.github.io/dist/images/2017-08-31/20171130image7.png\" alt></p>\n</li>\n<li>\n<p>预览图层\n<img src=\"https://zhangmingemma.github.io/dist/images/2017-08-31/20171130image8.png\" alt></p>\n</li>\n</ul>\n<p>输入样式名，显示对应样式下的WMS\n<img src=\"https://zhangmingemma.github.io/dist/images/2017-08-31/20171130image9.png\" alt></p>\n</section></template>\n\n","import { render } from \"./2017-08-31-Geoserver.md?vue&type=template&id=ab95723a\"\nconst script = {}\nscript.render = render\n\nexport default script","var map = {\n\t\"./2016-11-20-Cluster Paper Reading.md\": \"2863\",\n\t\"./2016-12-03-Text Categorization Summary.md\": \"dda5\",\n\t\"./2017-03-29-Python NLTK.md\": \"4ddc\",\n\t\"./2017-08-31-Geoserver.md\": \"7e5f\",\n\t\"./2018-01-13-CSS Selector.md\": \"9d4a\",\n\t\"./2018-10-15-Vue View Update.md\": \"8b9f\",\n\t\"./2018-10-16-Vue.md\": \"1d82\",\n\t\"./2018-10-17-VueRouter.md\": \"dc16\",\n\t\"./2019-07-16-Miniprogram Plugin.md\": \"32d2\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"83f3\";","<template><section><!-- ---\ntitle: 数据更新到视图更新，Vue做了什么\ndate: 2018-10-15\ntags: JavaScript, Vue\n--- -->\n<p>我们都知道Vue存在双向绑定机制，数据更新之后会触发Observer的set方法，进一步触发Watcher，进行视图的更新操作。那么视图的更新是否是对真实DOM进行更新操作的呢？视图更新过程中又有什么Vue独特的性能优化方案呢？</p>\n<p>实际上，Vue2.0加入了Virtual DOM，在页面更新渲染时，Vue会先依据更新后的数据渲染生成虚拟DOM，在虚拟DOM和更新前的虚拟DOM进行diff运算，得到所有需要在DOM上进行的变更，然后在 patch 过程中应用到真实DOM上实现视图的同步更新。本节讲述的主要内容便是虚拟DOM，DOM的diff算法以及DOM的patch算法</p>\n<h2>虚拟DOM</h2>\n<p><strong>首先，虚拟DOM是什么？</strong></p>\n<p>真实的DOM可以通过<code v-pre>document.CreateElement</code> 和 <code v-pre>document.CreateTextNode</code>创建；虚拟DOM是一个纯粹的JS对象，可以通过<code v-pre>document.createDocumentFragment</code> 创建，Vue中一个虚拟DOM包含以下属性：</p>\n<ul>\n<li>tag: 当前节点的标签名</li>\n<li>data: 当前节点的数据对象</li>\n<li>children: 数组类型，包含了当前节点的子节点</li>\n<li>text: 当前节点的文本，一般文本节点或注释节点会有该属性</li>\n<li>\n<p style=\"color:red\">elm: 当前虚拟节点对应的真实的dom节点</p>\n</li>\n<li>context: 编译作用域</li>\n<li>functionalContext: 函数化组件的作用域</li>\n<li>\n<p style=\"color:blue\">key: 节点的key属性，用于作为节点的标识，有利于patch的优化</p>\n</li>\n<li>\n<p style=\"color:blue\">sel: 节点的选择器</p>\n</li>\n<li>componentOptions: 创建组件实例时会用到的选项信息</li>\n<li>child: 当前节点对应的组件实例</li>\n<li>parent: 组件的占位节点</li>\n<li>raw: raw html</li>\n<li>isStatic: 静态节点的标识</li>\n<li>isRootInsert: 是否作为根节点插入，被<transition>包裹的节点，该属性的值为false</transition></li>\n<li>isComment: 当前节点是否是注释节点</li>\n<li>isCloned: 当前节点是否为克隆节点</li>\n<li>isOnce: 当前节点是否有v-once指令</li>\n</ul>\n<p><strong>为什么要使用虚拟DOM？</strong></p>\n<p>虚拟DOM因为是纯粹的JS对象，所以操作它会很高效。虽然很多时候手工优化dom确实会比virtual dom效率高，对于比较简单的dom结构用手工优化没有问题，但当页面结构很庞大，结构很复杂时，手工优化会花去大量时间，而且可维护性也不高，不能保证每个人都有手工优化的能力。至此，virtual dom的解决方案应运而生，virtual dom很多时候都不是最优的操作，但它具有普适性，在效率、可维护性之间达平衡。</p>\n<p>virtual dom 另一个重大意义就是提供一个中间层，js去写ui，ios安卓之类的负责渲染，就像reactNative一样。</p>\n<h2>patch过程</h2>\n<p>Vue在对同级虚拟DOM和真实DOM进行对比执行，当新旧虚拟节点的key和sel都相同时，则进行节点的深度patch，若不相同则整个替换虚拟节点，同时创建真实DOM，实现视图更新。</p>\n<pre v-pre><code v-pre>function patch (oldVnode, vnode) {\n    if (sameVnode(oldVnode, vnode)) { // 有必要进行patch, key和sel都相同时才进行patch\n        patchVnode(oldVnode, vnode)\n    } else {  // 没有必要进行patch, 整个替换\n        const oEl = oldVnode.el\n        let parentEle = api.parentNode(oEl)\n        createEle(vnode) // vnode创建它的真实dom，令vnode.el =真实dom\n        if (parentEle !== null) {\n            api.insertBefore(parentEle, vnode.el, api.nextSibling(oEl)) // 插入整个新节点树\n            api.removeChild(parentEle, oldVnode.el) // 移出整个旧的虚拟DOM\n            oldVnode = null\n        }\n    }\n    return vnode\n}\n</code></pre>\n<p>那么节点的深度patch过程如何呢？源码如下，分为注释中的四个情况来分别讨论patch过程</p>\n<pre v-pre><code v-pre>function patchVnode (oldVnode, vnode) {\n    const el = vnode.el = oldVnode.el  // vnode.el引用到现在的真实dom; 当el修改时，vnode.el会同步变化。\n    let i, oldCh = oldVnode.children, ch = vnode.children\n    if (oldVnode === vnode) return //可以认为没有变化\n    if (oldVnode.text !== null &amp;&amp; vnode.text !== null &amp;&amp; oldVnode.text !== vnode.text) { //1. 文本内容不同，则只进行文本替换\n        api.setTextContent(el, vnode.text)\n    }else {  \n        updateEle(el, vnode, oldVnode)\n        if (oldCh &amp;&amp; ch &amp;&amp; oldCh !== ch) { // 2. 两个节点都有子节点且不一样，则调用updateChildren函数比较子节点，是diff的核心\n            updateChildren(el, oldCh, ch)\n        }else if (ch){\n            createEle(vnode) // 3. 只有新节点有子节点，调用createEle(vnode)，在老dom节点上添加子节点\n        }else if (oldCh){\n            api.removeChildren(el) // 4. 新节点没有子节点，老节点有子节点，直接删除老节点。\n        }\n    }\n}\n</code></pre>\n<h2>diff算法</h2>\n<p>接下来就是最复杂的diff算法的理解了，diff算法用于比较新旧虚拟节点树，是视图更新渲染的关键。下面是一张很经典的图，出自《React’s diff algorithm》，Vue的diff算法也同样，即仅在同级的vnode间做diff，递归地进行同级vnode的diff，最终实现整个DOM树的更新。</p>\n<img style=\"width:400px;\" src=\"https://zhangmingemma.github.io/dist/images/2018-10-15/vue-diff1.png\">\n<p>diff的简易源码如下：</p>\n<pre v-pre><code v-pre>updateChildren (parentElm, oldCh, newCh) {\n    let oldStartIdx = 0, newStartIdx = 0\n    let oldEndIdx = oldCh.length - 1\n    let oldStartVnode = oldCh[0]\n    let oldEndVnode = oldCh[oldEndIdx]\n    let newEndIdx = newCh.length - 1\n    let newStartVnode = newCh[0]\n    let newEndVnode = newCh[newEndIdx]\n    let oldKeyToIdx\n    let idxInOld\n    let elmToMove\n    let before\n    while (oldStartIdx &lt;= oldEndIdx &amp;&amp; newStartIdx &lt;= newEndIdx) {\n        if (oldStartVnode == null) {   //对于vnode.key的比较，会把oldVnode = null\n            oldStartVnode = oldCh[++oldStartIdx] \n        }else if (oldEndVnode == null) {\n            oldEndVnode = oldCh[--oldEndIdx]\n        }else if (newStartVnode == null) {\n            newStartVnode = newCh[++newStartIdx]\n        }else if (newEndVnode == null) {\n            newEndVnode = newCh[--newEndIdx]\n        }else if (sameVnode(oldStartVnode, newStartVnode)) {\n            patchVnode(oldStartVnode, newStartVnode)\n            oldStartVnode = oldCh[++oldStartIdx]\n            newStartVnode = newCh[++newStartIdx]\n        }else if (sameVnode(oldEndVnode, newEndVnode)) {\n            patchVnode(oldEndVnode, newEndVnode)\n            oldEndVnode = oldCh[--oldEndIdx]\n            newEndVnode = newCh[--newEndIdx]\n        }else if (sameVnode(oldStartVnode, newEndVnode)) {\n            patchVnode(oldStartVnode, newEndVnode)\n            api.insertBefore(parentElm, oldStartVnode.el, api.nextSibling(oldEndVnode.el))\n            oldStartVnode = oldCh[++oldStartIdx]\n            newEndVnode = newCh[--newEndIdx]\n        }else if (sameVnode(oldEndVnode, newStartVnode)) {\n            patchVnode(oldEndVnode, newStartVnode)\n            api.insertBefore(parentElm, oldEndVnode.el, oldStartVnode.el)\n            oldEndVnode = oldCh[--oldEndIdx]\n            newStartVnode = newCh[++newStartIdx]\n        }else {\n            // 使用key时的比较\n            if (oldKeyToIdx === undefined) {\n                oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx) // 有key生成index表\n            }\n            idxInOld = oldKeyToIdx[newStartVnode.key]\n            if (!idxInOld) {\n                api.insertBefore(parentElm, createEle(newStartVnode).el, oldStartVnode.el)\n                newStartVnode = newCh[++newStartIdx]\n            }\n            else {\n                elmToMove = oldCh[idxInOld]\n                if (elmToMove.sel !== newStartVnode.sel) {\n                    api.insertBefore(parentElm, createEle(newStartVnode).el, oldStartVnode.el)\n                }else {\n                    patchVnode(elmToMove, newStartVnode)\n                    oldCh[idxInOld] = null\n                    api.insertBefore(parentElm, elmToMove.el, oldStartVnode.el)\n                }\n                newStartVnode = newCh[++newStartIdx]\n            }\n        }\n    }\n    if (oldStartIdx &gt; oldEndIdx) {\n        before = newCh[newEndIdx + 1] == null ? null : newCh[newEndIdx + 1].el\n        addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx)\n    }else if (newStartIdx &gt; newEndIdx) {\n        removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx)\n    }\n}\n</code></pre>\n<h3>过程概述</h3>\n<p>过程比较复杂，概括可以理解为：首先设置新旧虚拟DOM节点的孩子树<code v-pre>newCh</code>、<code v-pre>oldCh</code>的起始<code v-pre>StartIdx</code>、结尾索引<code v-pre>EndIdx</code>。它们的2个变量相互比较，一共有4种比较方式。如果4种比较都没匹配，如果设置了key，就会用key进行比较，在比较的过程中，变量会往中间靠，一旦StartIdx&gt;EndIdx表明oldCh和newCh至少有一个已经遍历完了，就会结束比较。</p>\n<img style=\"width:400px;\" src=\"https://zhangmingemma.github.io/dist/images/2018-10-15/vue-diff2.png\">\n<p>结束时存在两种具体的情况：</p>\n<ol>\n<li>\n<p><code v-pre>oldStartIdx &gt; oldEndIdx</code>，可以认为oldCh先遍历完。当然也有可能newCh此时也正好完成了遍历，统一都归为此类。此时newStartIdx和newEndIdx之间的vnode是新增的，调用addVnodes，把这些虚拟node.elm全部插进before的后边.</p>\n <img style=\"width:400px;\" src=\"https://zhangmingemma.github.io/dist/images/2018-10-15/vue-diff3.png\">\n</li>\n<li>\n<p><code v-pre>newStartIdx &gt; newEndIdx</code>，可以认为newCh先遍历完。此时oldStartIdx和oldEndIdx之间的vnode在新的子节点里已经不存在了，调用removeVnodes将这些虚拟node.elm从dom里删除。</p>\n <img style=\"width:400px;\" src=\"https://zhangmingemma.github.io/dist/images/2018-10-15/vue-diff4.png\">\n</li>\n</ol>\n<h3>过程详解</h3>\n<p>diff的具体遍历比较过程可以归纳为4种情况：</p>\n<ol>\n<li>当新旧起始节点为<code v-pre>null</code>时，则将起始索引<code v-pre>++</code>,并更新起始节点；同样的，当新旧结尾节点为<code v-pre>null</code>时，则将结尾索引<code v-pre>--</code>，并更新结尾节点</li>\n<li>当新旧起始节点相同时（即key和sel都相同），则<code v-pre>patchVnode</code>进行patch，同时将新旧起始索引<code v-pre>++</code>；同样的，当新旧结尾节点相同时（即key和sel都相同），则<code v-pre>patchVnode</code>进行patch，同时将新旧结尾索引<code v-pre>--</code></li>\n<li>当旧起始节点和新结尾节点相同时，<code v-pre>patchVnode</code>进行patch，将oldStartNode.elm移动到旧结尾节点oldEndNode.elm之后，旧起始索引<code v-pre>++</code>新结尾索引<code v-pre>--</code>；<br>\n<img style=\"width:400px;\" src=\"https://zhangmingemma.github.io/dist/images/2018-10-15/vue-diff5.png\"><br>\n同理，当新起始节点和旧结尾节点相同时，<code v-pre>patchVnode</code>进行patch，将旧结尾节点oldEndNode.elm移动到旧起始节点oldStartNode.elm之后，旧结尾索引<code v-pre>--</code>新起始索引<code v-pre>++</code>;<br>\n<img style=\"width:400px;\" src=\"https://zhangmingemma.github.io/dist/images/2018-10-15/vue-diff6.png\"></li>\n<li>以上情况都不是的时候，使用key进行比较，从用旧虚拟节点树key生成的对象oldKeyToIdx中查找匹配的节点，所以为节点设置key可以更高效的利用dom。\n<ul>\n<li>若新起始节点的key不在oldKeyToIdx中，在旧起始节点位置上插入新起始节点，同时新起始索引<code v-pre>++</code></li>\n<li>若新起始节点的key在oldKeyToIdx中，且key相同的两个虚拟节点sel相同，则<code v-pre>patchVnode</code>进行patch，把key相同的旧虚拟节点的elm移动到oldStartVnode.elm之前，新起始索引<code v-pre>++</code></li>\n<li>若新起始节点的key在oldKeyToIdx中，且key相同的两个虚拟节点sel不同，则在把新起始节点的elm插入到oldStartVnode.elm之前，新起始索引<code v-pre>++</code></li>\n</ul>\n</li>\n</ol>\n<p>自此，整个视图更新渲染过程中，Vue所做的事情就已经介绍完啦~~~</p>\n<p>参考文献：</p>\n<ol>\n<li><a href=\"https://blog.csdn.net/m6i37jk/article/details/78140159\">深入Vue2.x的虚拟DOM diff原理</a></li>\n<li><a href=\"https://segmentfault.com/a/1190000008782928\">解析vue2.0的diff算法</a></li>\n<li><a href=\"https://segmentfault.com/a/1190000008291645\">Vue原理解析之Virtual Dom</a></li>\n</ol>\n</section></template>\n\n","import { render } from \"./2018-10-15-Vue View Update.md?vue&type=template&id=53025be0\"\nconst script = {}\nscript.render = render\n\nexport default script","<template><section><!-- ---\ntitle: CSS选择器\ndate: 2018-01-13\ntags: CSS\n--- -->\n<p>CSS选择器可用于实现对HTML网页上的元素样式的一对一，一对多或者多对一的控制。本篇将从CSS选择器的分类、区别、优先级三方面讲述。</p>\n<h2>分类</h2>\n<h3>标签选择器</h3>\n<p>直接引用HTML中的标签控制相应元素样式</p>\n<pre v-pre><code v-pre>p {\n  color: yellow;\n}\n</code></pre>\n<h3>类选择器：</h3>\n<p>利用自定义的类名控制相应元素样式</p>\n<pre v-pre><code v-pre>.className{\n    background-color: red;\n}\n</code></pre>\n<h3>ID选择器</h3>\n<p>利用自行定义的ID名控制相应元素样式，因为选择器的级联关系，建议非必要时少用</p>\n<pre v-pre><code v-pre>#idName{\n    background-color: yellow;\n}\n</code></pre>\n<h3>群组选择器</h3>\n<p>多种选择器组合成为一组，控制同一种样式，选择器之间用，隔开</p>\n<pre v-pre><code v-pre>p,.className,#idName{\n    background-color: red;\n}\n</code></pre>\n<h3>子选择器</h3>\n<p>两个常用选择器，中间通过&gt;进行选择，其中前面的选择器选择父元素，后面的选择器选择父元素第一代孩子中全部对应的元素</p>\n<pre v-pre><code v-pre>&lt;style&gt;\n#box &gt; span {color:red;}\n&lt;/style&gt;\n\n&lt;div id=&quot;box&quot;&gt;\n&lt;h2&gt;测试子选择器&lt;/h2&gt;\n&lt;span&gt;第一个span标签&lt;/span&gt;\n&lt;p&gt;&lt;span&gt;第二个span标签&lt;/span&gt;&lt;/p&gt;\n&lt;/div&gt;\n//  父元素box中的第一代孩子中的span元素字体将被设置为红色，而包含在p标签 \n中的span元素（box元素的第二代孩子）则没有被影响。\n</code></pre>\n<h4>拓展</h4>\n<ul>\n<li>:first-child 匹配包含在其父元素中，每个作为首孩子出现的元素。（不限元素类型）</li>\n<li>:last-child 匹配包含在其父元素中，每个作为最后孩子出现的元素。</li>\n<li>:only-child 匹配包含其父元素中，每个作为唯一孩子出现的元素。</li>\n<li>:nth-child(n) 匹配包含在父元素中，每个作为第n个孩子出现的元素。（n 可以是数字、关键词或公式）</li>\n<li>:first-of-type 匹配包含在其父元素中，每个作为首孩子出现的特定类型元素。</li>\n<li>:last-of-type 匹配包含在其父元素中，每个作为最后孩子出现的特定类型元素。</li>\n<li>:nth-of-type(n) 匹配包含在父元素中，每个作为第n个孩子出现的的特定类型元素。 （n 可以是数字、关键词或公式）</li>\n</ul>\n<h3>后代选择器</h3>\n<p>用两个常用选择器，中间用空格隔开，前面的选择器选择父元素，后面的选择器选择父元素全部孩子中全部对应的元素</p>\n<pre v-pre><code v-pre>&lt;style&gt;\n#box span {color:red;}\n&lt;/style&gt;\n\n&lt;div id=&quot;box&quot;&gt;\n&lt;h2&gt;测试子选择器&lt;/h2&gt;\n&lt;span&gt;第一个span标签&lt;/span&gt;\n&lt;p&gt;&lt;span&gt;第二个span标签&lt;/span&gt;&lt;/p&gt;\n&lt;/div&gt;\n//  父元素box的后代中的所有span元素的字体都会被设置成红色。\n</code></pre>\n<h3>相邻同胞选择器</h3>\n<p>用两个常用选择器，中间通过+选择，作用于前面选择器同胞的，且是后面选择器选择的第一个元素</p>\n<pre v-pre><code v-pre>&lt;style&gt;\np+span{color:red;}\n&lt;/style&gt;\n\n&lt;div id=&quot;box&quot;&gt;\n&lt;h2&gt;测试相邻同胞选择器选择器&lt;/h2&gt;\n&lt;p&gt;&lt;span&gt;第一个span标签&lt;/span&gt;&lt;/p&gt;\n&lt;span&gt;第二个span标签&lt;/span&gt;\n&lt;span&gt;第三个span标签&lt;/span&gt;\n&lt;/div&gt;\n//  第二个span标签和p标签同胞故字体将被设置为红色。\n</code></pre>\n<h3>伪类选择器</h3>\n<p>有时候还会需要用文档以外的其他条件年实现元素的样式</p>\n<pre v-pre><code v-pre>&lt;style&gt;\na:hover{\n    color:red;\n}\n&lt;/style&gt;\n</code></pre>\n<ul>\n<li>:link 设置元素初始样式。</li>\n<li>:visited 设置元素被访问后的样式。</li>\n<li>:hover 设置鼠标悬停时样式。</li>\n<li>:active 设置鼠标点击瞬间的样式。</li>\n</ul>\n<p>--&gt; 在CSS 定义中，a:hover 必须被置于 a:link 和 a:visited 之后，a:active 必须被\n置于 a:hover 之后，才是有效的。若要同时设置这四种，一般设置顺序为LVHA。\n--&gt; 该种伪类一般被应用在链接上，也可以应用在其他元素上，例如表单元素中。</p>\n<h3>属性选择器</h3>\n<p>通过判断元素中是否存在html中某个属性或者符合某个属性值来选择作用该元素。</p>\n<pre v-pre><code v-pre>&lt;style&gt;\np[title]{\n    color:red;\n}\n&lt;/style&gt;\n\n&lt;p title=&quot;tag&quot;&gt;我是含有title标签的p标签，我将变红色。&lt;/p&gt;\n</code></pre>\n<pre v-pre><code v-pre>&lt;style&gt;\np[title=&quot;tag2&quot;]{\n    color:red;\n}\n&lt;/style&gt;\n    \n&lt;p title=&quot;tag1&quot;&gt;我是含有title标签且值为tag1的p标签。&lt;/p&gt;\n&lt;p title=&quot;tag2&quot;&gt;我是含有title标签且值为tag2的p标签，我将变红色。&lt;/p&gt;\n</code></pre>\n<h3>通配选择器</h3>\n<p>通用选择器用<code v-pre>*</code>来表示,选择作用于所有元素。</p>\n<pre v-pre><code v-pre>*{\n color:red;\n}\n</code></pre>\n<h2>区别</h2>\n<h3>Class和ID的区别</h3>\n<ul>\n<li>书写上的差别：class名用“.”号开头来定义，id名用“#”号开头来定义；</li>\n<li>调用上的区别：在同一个html网页页面中class是可以被多次调用的（在不同的地方）。而id名作为标签的身份则是唯一的，id在页面中只能出现一次。在js脚本中经常会用到id来修改一个标签的属性</li>\n<li>id作为元素的标签，用于区分不同结构和内容，而class作为一个样式，它可以应用到任何结构和内容上。</li>\n<li>在布局思路上，一般坚持这样的原则：id是先确定页面的结构和内容，然后再为它定义样式：而class相反，它先定义好一类样式，然后再页面中根据需要把类样式应用到不同的元素和内容上面。</li>\n<li>在实际应用时，class更多的被应用到文字版块以及页面修饰等方面，而id更多地被用来实现宏伟布局和设计包含块，或包含框的样式。</li>\n</ul>\n<h3>伪类和伪元素的区别</h3>\n<ul>\n<li>伪类本质上是为了弥补常规CSS选择器的不足，以便获取到更多信息；</li>\n</ul>\n<pre v-pre><code v-pre>*:nth-child(n)查找元素的第n个元素\n*:checked,*:disabled,*:link,*:visited,*:hover,*:active\n</code></pre>\n<ul>\n<li>伪元素本质上是创建了一个有内容的虚拟容器；</li>\n</ul>\n<pre v-pre><code v-pre>*::before,*::after,*::first-letter,*::first-line\n</code></pre>\n<ul>\n<li>CSS3中伪类和伪元素的语法不同：伪类为一个冒号，伪元素为两个冒号；</li>\n<li>可以同时使用多个伪类，而只能同时使用一个伪元素</li>\n<li>伪类的效果可以通过添加一个实际的类来达到，而伪元素的效果则需要通过添加一个实际的元素才能达到，这也是为什么他们一个称为伪类，一个称为伪元素的原因。</li>\n</ul>\n<h2>优先级</h2>\n<p><img src=\"https://zhangmingemma.github.io/dist/images/2018-01-13/20180310image1.png\" alt></p>\n<p>作者的样式表是由站点开发者编写的，被认为是最重要的样式表。用户可以用过浏览器应用自己的样式，这些样式表的重要度低一级。最后是浏览器或用户代理使用的默认样式表，它们的重要度是最低的，所以你总是可以覆盖它们。</p>\n<p>样式选择器的优先级顺序如下：</p>\n<ul>\n<li>important权重为10000</li>\n<li>style=&quot;&quot;内联样式权重为1000</li>\n<li>ID选择器的权重为100</li>\n<li>类选择器的权重为10</li>\n<li>伪类选择器的权重为10</li>\n<li>属性选择器的权重为10</li>\n<li>标签选择器的权重为1</li>\n<li>伪元素选择器的权重为1</li>\n<li>通配选择器的权重为0</li>\n</ul>\n</section></template>\n\n","import { render } from \"./2018-01-13-CSS Selector.md?vue&type=template&id=50189f31\"\nconst script = {}\nscript.render = render\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./List.vue?vue&type=style&index=0&id=093c8e64&lang=scss&scoped=true\"","import { ref, Ref } from \"@vue/reactivity\"\n\nexport const GitHubOAuth = {\n    ClientID: 'f2fc4c018508a76889b4',\n    ClientSecret: 'c61f4feab775f95de8af0e4e215e1a5b2b54707c',\n    Repo: 'zhangmingemma.github.io',\n    Owner: 'zhangmingemma',\n}\n\nexport const PageConfig = {\n    PageSie: 5\n}\n\nexport const promiseSync = <U>(fn:Promise<U>) => {\n    const res:Ref<U | null> = ref(null)\n    fn.then((result:U) => {\n        res.value = result\n    })\n    return {\n        res\n    }\n}\n\nexport const toTop = () => {\n    setTimeout(() => {\n        window.scrollTo({ top: 0, behavior: 'smooth'})\n    })\n}\n\nexport const intersect = (listA:(string|number)[], listB:(string|number)[]) => {\n    return listA.filter(x => listB.indexOf(x) >= 0) || []\n}\n\nexport const getPostPath = () => {\n    return process.env.NODE_ENV === \"production\" ? \"./dist/posts\" : \"./posts\"\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Home.vue?vue&type=style&index=0&id=3408c6b9&lang=scss&scoped=true\"","import { nextTick, reactive, ref, toRefs, watchEffect} from \"@vue/runtime-core\"\nimport axios, { AxiosResponse } from \"axios\"\nimport CatalogHandler from \"./CatalogHandler\"\nimport { promiseSync, getPostPath } from \"./Tool\"\nimport hljs from 'highlight.js'\nconst marked = require('marked')\nconst markedAST = require('marked-ast')\n\nmarked.setOptions({\n    renderer: new marked.Renderer(),\n    gfm: true, //默认为true。 允许 Git Hub标准的markdown.\n    tables: true, //默认为true。 允许支持表格语法。该选项要求 gfm 为true。\n    breaks: true, //默认为false。 允许回车换行。该选项要求 gfm 为true。\n    pedantic: false, //默认为false。 尽可能地兼容 markdown.pl的晦涩部分。不纠正原始模型任何的不良行为和错误。\n    smartLists: true,\n    smartypants: true, //使用更为时髦的标点，比如在引用语法中加入破折号。\n    highlight: function (code:any) {\n        return hljs.highlightAuto(code).value;\n    },\n});\n\ntype IPost = {\n    title?:string, \n    date?:string, \n    tags?:string[], \n    name?: string,\n    abstract?:string,\n    content?: string,\n}\n\nclass PostHandler {\n    Post:IPost = {}\n    postCompiler(fileName:string) {\n        const postHtml = ref<string>('')\n        const catalogHtml = ref<string>('')\n        const state = reactive({\n            catalogOffset: null as typeof CatalogHandler.CatalogOffset,\n            post: {} as IPost\n        })\n\n        const { res } = promiseSync<IPost>(this.getPostInfo(fileName))      \n        watchEffect(async() => {\n            if (res.value) {\n                state.post = res.value\n                postHtml.value = marked(res.value.content)\n                await nextTick()\n                catalogHtml.value = CatalogHandler.getCatalogHtml()\n                CatalogHandler.setHId()\n                await nextTick()\n                state.catalogOffset = CatalogHandler.getCatalogOffset(true)\n            }\n        })\n\n        window.onresize = () => {\n            state.catalogOffset = CatalogHandler.getCatalogOffset(true)\n        }\n\n        return {\n            postHtml,\n            catalogHtml,\n            ...toRefs(state),\n            anchor: CatalogHandler.anchor\n        }\n    }\n\n    // 获取文章信息\n    async getPostInfo(fileName:string) {\n        const post:AxiosResponse = await axios.get(`${getPostPath()}/${fileName}.md`)\n        const data:string = post.data\n        const info:IPost = {}\n        info['content'] = data\n        info['abstract'] = this.getPostAbstract(data)\n        info['name'] = this.getPostName(fileName)\n        const layout = this.matchPostBase(data)\n        if (layout && layout.length >= 4) {\n            info['title'] = layout[1]\n            info['date'] = layout[2]\n            info['tags'] = layout[3].split(',').map(s => s.trim())\n        }\n        return info\n    }\n\n    // 获取文章文件名\n    getPostName(filePath:string) {\n        if (filePath) {\n            const paths:string[] = filePath.split('/')\n            if (paths && paths.length) {\n                const fileName:string = paths.pop()!\n                return fileName.replace(/\\.\\w+$/, '')\n            }\n        }\n        return ''\n    }\n\n    // 匹配文章头部文本\n    matchPostBase(data:string) {\n        const content:string = data.split('\\n').map(s => s.trim()).join('')\n        return content.match(/-+title: (.*?)date: (.*?)tags: (.*?)-+/)\n    }\n\n    // 匹配文章摘要\n    getPostAbstract(data:string) {\n        const content:RegExpMatchArray|null = data.match(/--- -->(\\s+(.*))+/)\n        if (content && content.length >= 1) {\n            const text:string = content?.[0].replace('--- -->', '')\n            const ast:object[] = markedAST.parse(text.trim())\n            const abstract:string = this.parseMarkAst(ast).slice(0, 500)\n            return abstract+'...'\n        }\n        return ''\n    }\n\n    parseMarkAst(ast:object[]) {\n        let result:string = ''\n        if (ast && ast.length) {\n            ast.map((astItem:any) => {\n                if (['paragraph', 'heading', 'strong', 'em'].indexOf(astItem.type) >= 0) {\n                    if (astItem.text && astItem.text.length) {\n                        astItem.text.map((textItem:any) => {\n                            if (typeof textItem === 'string') {\n                                result += this.getAstText(textItem)\n                            } else if (typeof textItem === 'object') {\n                                const text = textItem?.text?.[0]\n                                if( text && typeof text === 'string') {\n                                    result += text.replaceAll('\\n','').trim()\n                                }\n                            }\n                        })\n                    }\n                }\n\n                if (astItem.type === 'list' && astItem.body && astItem.body.length) {\n                    astItem.body.map((listItem:any) => {\n                        if (listItem.type === 'listitem') {\n                            result += this.parseMarkAst(astItem)\n                        }\n                    })\n                } \n            })\n        }\n        return result\n    }\n\n    getAstText(text:string) {\n        const noSpaceText = text.replaceAll('\\n', '').trim()\n        const noHtmlText = noSpaceText.replace(/<[^>]+>/g, ' ')\n        return noHtmlText\n    }\n}\n\nexport default new PostHandler()","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Nav.vue?vue&type=style&index=0&id=31190f33&scoped=true&lang=scss\"","<template>\n    <div class=\"m-page\">\n        <Nav/>\n        <router-view/>\n    </div>\n</template>\n\n<style lang=\"scss\">\n.m-page {\n    box-sizing: border-box;\n    min-height: 100%;\n    overflow: auto;\n    padding-bottom: 12rem;\n    animation: fade-in-down .6s ease;\n}\n\n@keyframes fade-in-down {\n    0% {\n        opacity: 0;\n        transform: translateY(-2rem);\n    }\n    100% {\n        opacity: 1;\n        transform: translateY(0);\n    }\n}\n</style>\n","import { render } from \"./App.vue?vue&type=template&id=6ddbc1f2\"\nconst script = {}\n\nimport \"./App.vue?vue&type=style&index=0&id=6ddbc1f2&lang=scss\"\nscript.render = render\n\nexport default script","<template>\n    <div class=\"home\">\n        <template v-for=\"(post, index) in postList\" :key=\"index\">\n            <Block :post=\"post\"/>\n        </template>\n        <Pagination :total=\"total\" :onPageChange=\"onPageChange\"/>\n    </div>\n</template>\n\n<script lang=\"ts\">\nimport ListHandler from '@tool/ListHandler'\nimport { defineComponent } from '@vue/runtime-core'\nimport Block from '@/components/Block.vue'\nimport Pagination from '@/components/Pagination.vue'\nimport { toTop } from '@/utils/tool/Tool'\n\nexport default defineComponent({\n    setup() {\n        const _listCompiler = ListHandler.listCompiler()\n\n        const onPageChange = (startIndex:number, endIndex:number) => {\n            toTop()\n            _listCompiler.reloadList({startIndex, endIndex})\n        }\n\n        return {\n            ..._listCompiler,\n            onPageChange\n        }\n    },\n    components: { Block, Pagination }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.home {\n    @include outer-container();\n}\n</style>\n","<template>\n    <div class=\"pagination\" v-if=\"total > pageSize\">\n        <div class=\"pagination-title\">共计{{total}}篇文章，{{pageCount}}页</div>\n        <div class=\"pagination-main\">\n            <div class=\"pagination-main-item break start\" :class=\"{disable: curPage === 1}\" @click=\"toPre\"></div>\n            <div \n                class=\"pagination-main-item\" \n                :class=\"{active:page === curPage, empty:page === '...'}\" \n                v-for=\"page in pageLine\" \n                :key=\"page\" \n                @click=\"toJump(page)\">{{page}}</div>\n            <div class=\"pagination-main-item break\" :class=\"{disable: curPage === pageCount}\" @click=\"toNext\"></div>\n        </div>\n    </div>\n</template>\n\n<script lang=\"ts\">\nimport { PageConfig } from '@/utils/tool/Tool'\nimport { computed, defineComponent, reactive, Ref, ref, toRefs, watch } from 'vue'\n\nexport default defineComponent({\n    props: {\n        total: {\n            type: Number,\n            default: 0\n        },\n        onPageChange: {\n            type: Function,\n            default: () => () => {}\n        }\n    },\n    setup(props) {\n        const pageSize:number = PageConfig.PageSie\n        const paginationSize:number = 6\n        const curPage = ref<number>(1)\n        const state = reactive({\n            pageLine: [] as (number|string)[]\n        })\n\n        const getPageLine = () => {\n            if (pageCount.value <= paginationSize) {\n                const list = Array.from(new Array(pageCount.value).keys())\n                return list.map(n => n+1)\n            }\n            let pageLine:(number|string)[] = []\n            if (curPage.value - 1 > 1) {\n                pageLine.push(curPage.value - 1)\n            } \n            pageLine.push(curPage.value)\n            if (curPage.value + 1 < pageCount.value) {\n                pageLine.push(curPage.value + 1)\n            }\n            if (pageLine[0] > 2) {\n                pageLine.unshift('...')\n            }\n            if (pageLine[0] != 1) {\n                pageLine.unshift(1)\n            }\n            if (pageLine[pageLine.length - 1] < pageCount.value - 1) {\n                pageLine.push('...')\n            }\n            if (pageLine[pageLine.length - 1] != pageCount.value) {\n                pageLine.push(pageCount.value)\n            }\n            return pageLine\n        }\n\n        const pageCount:Ref<number> = computed(() => Math.ceil(props.total / pageSize))\n        state.pageLine = getPageLine()\n        watch(() => curPage.value, ()=> {\n            state.pageLine = getPageLine()\n            const startIndex = (curPage.value - 1)*pageSize\n            const endIndex = startIndex + pageSize\n            props.onPageChange && props.onPageChange(startIndex, endIndex)\n        })\n\n        watch(() => pageCount.value, () => {\n            state.pageLine = getPageLine()\n        })\n\n        const toPre = () => {\n            const pre:number = curPage.value - 1\n            curPage.value = pre >= 1 ? pre : curPage.value\n        }\n\n        const toNext = () => {\n            const next:number = curPage.value + 1\n            curPage.value = next <=  pageCount.value ? next : curPage.value\n        }\n\n        const toJump = (to:string|number) => {\n            if (typeof to === 'string') return \n            curPage.value = to >= 1 && to <= pageCount.value ? to : curPage.value\n        }\n        \n        return {\n            curPage,\n            pageCount,\n            pageSize,\n            ...toRefs(state),\n            toPre,\n            toNext,\n            toJump\n        }\n    }\n})\n</script>\n\n<style scoped lang=\"scss\">\n.pagination-title {\n    margin: .5rem 0;\n}\n.pagination-main {\n    @include flex-center(vert);\n    flex-wrap: wrap;\n    &-item {\n        @include flex-center();\n        margin: .2rem .25rem .2rem 0;\n        color: $font-dark-grey;\n        background: $bg-grey;\n        width: $font-size-h1-small;\n        height: $font-size-h1-small;\n        border-radius: 50%;\n        font-weight: $font-weight-bold;\n        line-height: 1;\n        box-sizing: border-box;\n        position: relative;\n        cursor: pointer;\n        transition: all .3s ease;\n        &.empty {\n            background: transparent;\n        }\n        &.break {\n            &:after {\n                position: absolute;\n                content: '';\n                width: $font-size-h6-excerpt;\n                height: $font-size-h6-excerpt;\n                background-image: url('../assets/arrow.png');\n                background-repeat: no-repeat;\n                background-size: contain;\n            }\n            &.start {\n                &:after {\n                    transform: rotate(180deg);\n                }\n            }\n            &.disable {\n                cursor: not-allowed;\n                &:after {\n                    background-image: url('../assets/arrow_disable.png') !important;\n                }\n                &:hover, &:active, &:focus {\n                    color: $font-opacity-grey;\n                    background: $bg-grey;\n                }\n            }\n            &:hover, &:active, &:focus, &.active {\n                &:after {\n                    background-image: url('../assets/arrow_white.png');\n                }\n            }\n        }\n        &:hover, &:active, &:focus, &.active {\n            color: $font-white;\n            background: $link-red;\n        }\n    }\n}\n</style>\n","\nimport { PageConfig } from '@/utils/tool/Tool'\nimport { computed, defineComponent, reactive, Ref, ref, toRefs, watch } from 'vue'\n\nexport default defineComponent({\n    props: {\n        total: {\n            type: Number,\n            default: 0\n        },\n        onPageChange: {\n            type: Function,\n            default: () => () => {}\n        }\n    },\n    setup(props) {\n        const pageSize:number = PageConfig.PageSie\n        const paginationSize:number = 6\n        const curPage = ref<number>(1)\n        const state = reactive({\n            pageLine: [] as (number|string)[]\n        })\n\n        const getPageLine = () => {\n            if (pageCount.value <= paginationSize) {\n                const list = Array.from(new Array(pageCount.value).keys())\n                return list.map(n => n+1)\n            }\n            let pageLine:(number|string)[] = []\n            if (curPage.value - 1 > 1) {\n                pageLine.push(curPage.value - 1)\n            } \n            pageLine.push(curPage.value)\n            if (curPage.value + 1 < pageCount.value) {\n                pageLine.push(curPage.value + 1)\n            }\n            if (pageLine[0] > 2) {\n                pageLine.unshift('...')\n            }\n            if (pageLine[0] != 1) {\n                pageLine.unshift(1)\n            }\n            if (pageLine[pageLine.length - 1] < pageCount.value - 1) {\n                pageLine.push('...')\n            }\n            if (pageLine[pageLine.length - 1] != pageCount.value) {\n                pageLine.push(pageCount.value)\n            }\n            return pageLine\n        }\n\n        const pageCount:Ref<number> = computed(() => Math.ceil(props.total / pageSize))\n        state.pageLine = getPageLine()\n        watch(() => curPage.value, ()=> {\n            state.pageLine = getPageLine()\n            const startIndex = (curPage.value - 1)*pageSize\n            const endIndex = startIndex + pageSize\n            props.onPageChange && props.onPageChange(startIndex, endIndex)\n        })\n\n        watch(() => pageCount.value, () => {\n            state.pageLine = getPageLine()\n        })\n\n        const toPre = () => {\n            const pre:number = curPage.value - 1\n            curPage.value = pre >= 1 ? pre : curPage.value\n        }\n\n        const toNext = () => {\n            const next:number = curPage.value + 1\n            curPage.value = next <=  pageCount.value ? next : curPage.value\n        }\n\n        const toJump = (to:string|number) => {\n            if (typeof to === 'string') return \n            curPage.value = to >= 1 && to <= pageCount.value ? to : curPage.value\n        }\n        \n        return {\n            curPage,\n            pageCount,\n            pageSize,\n            ...toRefs(state),\n            toPre,\n            toNext,\n            toJump\n        }\n    }\n})\n","import { render } from \"./Pagination.vue?vue&type=template&id=d6a35aac&scoped=true\"\nimport script from \"./Pagination.vue?vue&type=script&lang=ts\"\nexport * from \"./Pagination.vue?vue&type=script&lang=ts\"\n\nimport \"./Pagination.vue?vue&type=style&index=0&id=d6a35aac&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-d6a35aac\"\n\nexport default script","\nimport ListHandler from '@tool/ListHandler'\nimport { defineComponent } from '@vue/runtime-core'\nimport Block from '@/components/Block.vue'\nimport Pagination from '@/components/Pagination.vue'\nimport { toTop } from '@/utils/tool/Tool'\n\nexport default defineComponent({\n    setup() {\n        const _listCompiler = ListHandler.listCompiler()\n\n        const onPageChange = (startIndex:number, endIndex:number) => {\n            toTop()\n            _listCompiler.reloadList({startIndex, endIndex})\n        }\n\n        return {\n            ..._listCompiler,\n            onPageChange\n        }\n    },\n    components: { Block, Pagination }\n})\n","import { render } from \"./Home.vue?vue&type=template&id=3408c6b9&scoped=true\"\nimport script from \"./Home.vue?vue&type=script&lang=ts\"\nexport * from \"./Home.vue?vue&type=script&lang=ts\"\n\nimport \"./Home.vue?vue&type=style&index=0&id=3408c6b9&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-3408c6b9\"\n\nexport default script","<template>\n    <div class=\"list\">\n        <div class=\"list-tag\">\n            <div class=\"blog-tag\" :class=\"{selected: !selectedTags.length}\" @click=\"tapAll\">All</div>\n            <div class=\"blog-tag\" :class=\"{selected: selectedTags.indexOf(item)>=0}\" v-for=\"item in tagList\" :key=\"item\" @click=\"tapTag(item)\">{{item}}</div>\n        </div>\n        <div class=\"list-main\">\n            <div class=\"list-main-item\" v-for=\"(post,index) in postList\" :key=\"index\" @click=\"tapPost(post.name)\">\n                <span class=\"date\">{{post.date}}</span>\n                <span class=\"title\">{{post.title}}</span>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, reactive, toRefs } from 'vue'\nimport ListHandler from '@/utils/tool/ListHandler'\nimport { toTop } from '@/utils/tool/Tool'\nimport { useRouter } from 'vue-router'\n\nexport default defineComponent({\n    setup() {\n        const router = useRouter()\n        const state = reactive({\n            tagList: [] as string[],\n            selectedTags: [] as string[]\n        })\n        const _listCompiler = ListHandler.listCompiler({banPagination: true})\n        state.tagList = ListHandler.getAllPostTag()\n\n        const tapTag = (tag:string) => {\n            const idx = state.selectedTags.indexOf(tag)\n            if ( idx >= 0) {\n                state.selectedTags.splice(idx,1)\n            } else {\n                state.selectedTags.push(tag)\n            }\n            _listCompiler.reloadList({\n                tags: state.selectedTags\n            })\n        }\n\n        const tapAll = () => {\n            state.selectedTags = []\n            _listCompiler.reloadList()\n        }\n\n        const tapPost = (name:string) => {\n            toTop()\n            router.push(`/post?file=${name}`)\n        }\n\n        return {\n            ...toRefs(state),\n            ..._listCompiler,\n            tapPost,\n            tapTag,\n            tapAll\n        }\n    }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.list {\n    @include outer-container();\n    padding-bottom: 1.3rem;\n    margin-top: 2.6rem;\n\n    .blog-tag {\n        &.selected {\n            background: $link-red;\n            color: $font-white;\n        }\n    }\n\n    &-main {\n        margin-top: 2.6rem;\n        position: relative;\n        &:before {\n            content: '';\n            position: absolute;\n            top: 0;\n            left: 7px;\n            bottom: 0;\n            width: 2px;\n            background: $line-catalog-grey;\n            opacity: .5;\n        }\n        &-item {\n            margin: .6rem 0;\n            padding: .2rem 0 .2rem 2.6rem;\n            position: relative;\n            @include item-dot(6px, 50%, 5px, .8rem);\n\n            .date {\n                cursor: pointer;\n                color: $font-mid-grey;\n                width: 7rem;\n                display: inline-block;\n            }\n\n            .title {\n                cursor: pointer;\n                &:hover, &:active, &:focus, &:link {\n                    color: $link-red;\n                }\n            }\n        }\n    }\n}\n</style>\n","\nimport { defineComponent, reactive, toRefs } from 'vue'\nimport ListHandler from '@/utils/tool/ListHandler'\nimport { toTop } from '@/utils/tool/Tool'\nimport { useRouter } from 'vue-router'\n\nexport default defineComponent({\n    setup() {\n        const router = useRouter()\n        const state = reactive({\n            tagList: [] as string[],\n            selectedTags: [] as string[]\n        })\n        const _listCompiler = ListHandler.listCompiler({banPagination: true})\n        state.tagList = ListHandler.getAllPostTag()\n\n        const tapTag = (tag:string) => {\n            const idx = state.selectedTags.indexOf(tag)\n            if ( idx >= 0) {\n                state.selectedTags.splice(idx,1)\n            } else {\n                state.selectedTags.push(tag)\n            }\n            _listCompiler.reloadList({\n                tags: state.selectedTags\n            })\n        }\n\n        const tapAll = () => {\n            state.selectedTags = []\n            _listCompiler.reloadList()\n        }\n\n        const tapPost = (name:string) => {\n            toTop()\n            router.push(`/post?file=${name}`)\n        }\n\n        return {\n            ...toRefs(state),\n            ..._listCompiler,\n            tapPost,\n            tapTag,\n            tapAll\n        }\n    }\n})\n","import { render } from \"./List.vue?vue&type=template&id=093c8e64&scoped=true\"\nimport script from \"./List.vue?vue&type=script&lang=ts\"\nexport * from \"./List.vue?vue&type=script&lang=ts\"\n\nimport \"./List.vue?vue&type=style&index=0&id=093c8e64&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-093c8e64\"\n\nexport default script","import { createRouter, createWebHashHistory, createWebHistory, RouteRecordRaw } from 'vue-router'\nimport Home from '@/views/Home.vue'\nimport List from '@/views/List.vue'\n\nconst routes: Array<RouteRecordRaw> = [\n    {\n        path: '/',\n        name: 'Home',\n        component: Home\n    },\n    {\n        path: '/list',\n        name: 'List',\n        component: List\n    },\n    {\n        path: '/cv',\n        name: 'CV',\n        component: () => import('../views/CV.vue')\n    },\n    {\n        path: '/post',\n        name: 'Post',\n        component: () => import('../views/Post.vue')\n    },\n    {\n        path: '/tag',\n        name: 'Tag',\n        component: () => import('../views/Tag.vue')\n    },\n]\n\nconst router = createRouter({\n    // history: createWebHistory(process.env.BASE_URL), // history模式\n    history: createWebHashHistory(),\n    routes\n})\n\nexport default router\n","<template>\n    <div class=\"header\">\n        <div class=\"header-inner clearfix\" :class=\"{'larger-nav': isPost}\">\n            <div class=\"header-inner-logo\">\n                <img src=\"../assets/logo.png\"/>\n                <router-link class=\"title home\" :class=\"{active: routeName === 'Home'}\" to=\"/\">Gemma's Blog</router-link>\n            </div>\n            <div class=\"header-inner-nav\">\n                <router-link class=\"title\" :class=\"{active: routeName === 'Home'}\" to=\"/\">主页</router-link>\n                <router-link class=\"title\" :class=\"{active: routeName === 'List'}\" to=\"/list\">归档</router-link>\n                <router-link class=\"title\" :class=\"{active: routeName === 'CV'}\" to=\"/cv\">CV</router-link>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, watch } from 'vue'\nimport { RouteRecordName, useRoute } from 'vue-router'\nexport default defineComponent({\n    setup() {\n        const routeName = ref<RouteRecordName|null|undefined>('')\n        const isPost = ref<Boolean>(false)\n        const route = useRoute()\n        watch(() => route.name, () => {\n            routeName.value = route.name\n            isPost.value = route.name === 'Post'\n        })\n\n        return {\n            routeName,\n            isPost\n        }\n    }\n})\n</script>\n\n<style scoped lang=\"scss\">\n.header {\n    background-color: $bg-grey;\n    border-bottom: 1px solid $line-grey;\n    &-inner {\n        @include outer-container();\n        transition: all .3s ease;\n        &.larger-nav {\n            max-width: $content-max-width + $aside-width;\n        }\n        &-logo {\n            float: left;\n            flex-wrap: wrap;\n            height: $header-height;\n            @include flex-center(vert);\n            @include media-breakpoint-down($content-min-width) {\n                float: none;\n                height: $header-height-small;\n            }\n            img {\n                width: $font-size-h4 * 1.6;\n                height: $font-size-h4 * 1.6;\n                margin-right: .8rem;\n                vertical-align: middle;\n                @include media-breakpoint-down($content-max-width) {\n                    margin-right: .5rem;\n                    width: $font-size-h4 * 1.2;\n                    height: $font-size-h4 * 1.2;\n                }\n            }\n            .title {\n                @include nav-link();\n                font-size: $font-size-h4;\n                display: inline-block;\n                @include media-breakpoint-down($content-max-width) {\n                    font-size: $font-size-h4-small;\n                }\n                &.home {\n                    &.active, &:hover, &:focus {\n                        color: $font-dark-grey;\n                    }\n                }\n            }\n        }\n        &-nav {\n            float: right;\n            overflow-x: auto;\n            white-space: nowrap;\n            height: $header-height;\n            flex-wrap: nowrap;\n            @include flex-center(vert);\n            @include media-breakpoint-down($content-min-width) {\n                float: none;\n                height: auto;\n            }\n            .title {\n                @include nav-link();\n                margin-top: .5rem;\n                margin-bottom: .5rem;\n                list-style-type: none;\n                margin-right: 1rem;\n            }\n        }\n    }\n}\n.clearfix:after {\n    content: \"\";\n    display: table;\n    clear: both;\n    height: 0;\n    font-size: 0;\n}\n</style>\n","\nimport { defineComponent, ref, watch } from 'vue'\nimport { RouteRecordName, useRoute } from 'vue-router'\nexport default defineComponent({\n    setup() {\n        const routeName = ref<RouteRecordName|null|undefined>('')\n        const isPost = ref<Boolean>(false)\n        const route = useRoute()\n        watch(() => route.name, () => {\n            routeName.value = route.name\n            isPost.value = route.name === 'Post'\n        })\n\n        return {\n            routeName,\n            isPost\n        }\n    }\n})\n","import { render } from \"./Nav.vue?vue&type=template&id=31190f33&scoped=true\"\nimport script from \"./Nav.vue?vue&type=script&lang=ts\"\nexport * from \"./Nav.vue?vue&type=script&lang=ts\"\n\nimport \"./Nav.vue?vue&type=style&index=0&id=31190f33&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-31190f33\"\n\nexport default script","import { createApp } from 'vue'\nimport App from './views/App.vue'\nimport router from './router'\nimport Nav from '@/components/Nav.vue'\nimport '@style/_common.scss'\nimport 'highlight.js/styles/github.css'\n\nconst app = createApp(App)\napp.component('Nav', Nav)\napp.use(router).mount('#app')\n","module.exports = __webpack_public_path__ + \"img/logo.cfd07c7f.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=6ddbc1f2&lang=scss\"","<template><section><!-- ---\ntitle: vue-router实现原理\ndate: 2018-10-17\ntags: JavaScript, Vue\n--- -->\n<p>vue-router是 Vue.js 官方的路由管理器。它和 Vue.js 的核心深度集成，让构建单页面应用变得易如反掌。这篇文章讲述的主要内容便是vue-router的实现原理，相当于<a href=\"https://github.com/vuejs/vue-router\">vue-router源码</a>的粗浅理解。行文主要包括vue-router的使用方法、实现原理两大部分，使用方法的介绍是为了辅助实现原理的陈述。</p>\n<h3>使用方法</h3>\n<ol>\n<li>注册VueRouter插件:<pre v-pre><code v-pre class=\"language-javascript\"><span class=\"hljs-keyword\">import</span> Vue <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'vue'</span>\n<span class=\"hljs-keyword\">import</span> VueRouter <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'vue-router'</span>\nVue.use(VueRouter)\n</code></pre>\n</li>\n<li>定义（路由）组件与路由。<pre v-pre><code v-pre class=\"language-javascript\"><span class=\"hljs-keyword\">const</span> User = { <span class=\"hljs-attr\">template</span>: <span class=\"hljs-string\">'&lt;div&gt;用户&lt;/div&gt;'</span> }\n<span class=\"hljs-keyword\">const</span> Role = { <span class=\"hljs-attr\">template</span>: <span class=\"hljs-string\">'&lt;div&gt;角色&lt;/div&gt;'</span> }\n<span class=\"hljs-keyword\">const</span> routes = [\n  { <span class=\"hljs-attr\">path</span>: <span class=\"hljs-string\">'/user'</span>, <span class=\"hljs-attr\">component</span>: User },\n  { <span class=\"hljs-attr\">path</span>: <span class=\"hljs-string\">'/home'</span>, <span class=\"hljs-attr\">component</span>: Home }\n]\n</code></pre>\n</li>\n<li>创建 router 实例，并传 <code v-pre>routes</code> 配置<code v-pre>const router = new VueRouter({routes })</code></li>\n<li>创建和挂载根实例。<pre v-pre><code v-pre class=\"language-javascript\"><span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-keyword\">new</span> Vue({\n    router,\n    <span class=\"hljs-attr\">template</span>: <span class=\"hljs-string\">`\n        &lt;div id=\"app\"&gt;\n        &lt;h1&gt;Basic&lt;/h1&gt;\n        &lt;ul&gt;\n            &lt;li&gt;&lt;router-link to=\"/\"&gt;/&lt;/router-link&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;router-link to=\"/user\"&gt;用户&lt;/router-link&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;router-link to=\"/role\"&gt;角色&lt;/router-link&gt;&lt;/li&gt;\n            &lt;router-link tag=\"li\" to=\"/user\"&gt;/用户&lt;/router-link&gt;\n        &lt;/ul&gt;\n        &lt;router-view class=\"view\"&gt;&lt;/router-view&gt;\n        &lt;/div&gt;\n    `</span>\n}).$mount(<span class=\"hljs-string\">'#app'</span>)\n</code></pre>\n</li>\n</ol>\n<h3>实现原理</h3>\n<p>每一个工具实现的原理都依赖JS/HTML基本语法，比如Vue的双向数据绑定依赖的是JS的Object.defineProperty。而Vue Router的实现依赖于两种前端路由，即模式history模式和hash模式：</p>\n<ul>\n<li>history模式\n<ul>\n<li>HTML5中的两个API：pushState和replaceState，改变url之后页面不会重新刷新，也不会带有#号，页面地址美观，url的改变会触发popState事件，监听该事件也可以实现根据不同的url渲染对应的页面内容</li>\n<li>但是因为没有#会导致用户在刷新页面的时候，还会发送请求到服务端，为避免这种情况，需要每次url改变的时候，都将所有的路由重新定位到跟路由下</li>\n</ul>\n</li>\n<li>hash模式\n<ul>\n<li>url hash: http://foo.com/#help</li>\n<li>#后面hash值的改变，并不会重新加载页面，同时hash值的变化会触发hashchange事件，该事件可以监听，可根据不同的哈希值渲染不同的页面内容</li>\n</ul>\n</li>\n</ul>\n<h4>1. 插件注册</h4>\n<p>Vue.use将VueRouter插件注入Vue中，use方法会调用vue-router的<code v-pre>install</code>方法，对<strong>VueRouter进行安装</strong>，整个安装过程精简版的源码，全部<a href=\"https://github.com/vuejs/vue-router/blob/dev/src/install.js\">源码地址</a>：</p>\n<pre v-pre><code v-pre class=\"language-javascript\">Vue.mixin({\n  beforeCreate () { ...},\n})\n<span class=\"hljs-built_in\">Object</span>.defineProperty(Vue.prototype, <span class=\"hljs-string\">'$router'</span>, {\n  <span class=\"hljs-keyword\">get</span> () { <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>._routerRoot._router }\n})\n<span class=\"hljs-built_in\">Object</span>.defineProperty(Vue.prototype, <span class=\"hljs-string\">'$route'</span>, {\n  <span class=\"hljs-keyword\">get</span> () { <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>._routerRoot._route }\n})\nVue.component(<span class=\"hljs-string\">'RouterView'</span>, View)\nVue.component(<span class=\"hljs-string\">'RouterLink'</span>, Link)\n</code></pre>\n<p>install这个过程主要做了这样的三件事：</p>\n<ul>\n<li>对Vue实例混入beforeCreate/destroyed两个钩子操作，在Vue实例创建生命周期中钩子函数执行前被调用，这个在创建Vue实例部分详细介绍；</li>\n<li>设置Vue.prototype代理，当访问this.$router和this.$route的时候,返回this._routerRoot._router和_route，方便所有组件可以获取到这两个属性</li>\n<li>注册RouterLink和RouterView两个组件\n<ul>\n<li>router-view: 获取到匹配的组件，在非keepalive模式下，每次都要设置钩子进而更新匹配了的实例元素</li>\n<li>router-link: 绑定click事件，在其点击的时候根据设置的 to 的值去调用 router 的 push 或者 replace 来更新路由的，同时呢，会检查自身是否和当前路由匹配（严格匹配和包含匹配）来决定自身的 activeClass 是否添加</li>\n</ul>\n</li>\n</ul>\n<h4>2. 创建router实例</h4>\n<p>全部<a href=\"https://github.com/vuejs/vue-router/blob/dev/src/index.js\">源码地址</a>,核心源码：</p>\n<pre v-pre><code v-pre class=\"language-javascript\"><span class=\"hljs-keyword\">this</span>.matcher = createMatcher(options.routes || [], <span class=\"hljs-keyword\">this</span>)\n<span class=\"hljs-keyword\">let</span> mode = options.mode || <span class=\"hljs-string\">'hash'</span>\n<span class=\"hljs-keyword\">this</span>.fallback = mode === <span class=\"hljs-string\">'history'</span> &amp;&amp; !supportsPushState &amp;&amp; options.fallback !== <span class=\"hljs-literal\">false</span>\n<span class=\"hljs-keyword\">if</span> (<span class=\"hljs-keyword\">this</span>.fallback) {\n  mode = <span class=\"hljs-string\">'hash'</span>\n}\n<span class=\"hljs-keyword\">if</span> (!inBrowser) {\n  mode = <span class=\"hljs-string\">'abstract'</span>\n}\n<span class=\"hljs-keyword\">this</span>.mode = mode\n<span class=\"hljs-keyword\">switch</span> (mode) {\n  <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">'history'</span>:\n    <span class=\"hljs-keyword\">this</span>.history = <span class=\"hljs-keyword\">new</span> HTML5History(<span class=\"hljs-keyword\">this</span>, options.base)\n    <span class=\"hljs-keyword\">break</span>\n  <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">'hash'</span>:\n    <span class=\"hljs-keyword\">this</span>.history = <span class=\"hljs-keyword\">new</span> HashHistory(<span class=\"hljs-keyword\">this</span>, options.base, <span class=\"hljs-keyword\">this</span>.fallback)\n    <span class=\"hljs-keyword\">break</span>\n  <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">'abstract'</span>:\n    <span class=\"hljs-keyword\">this</span>.history = <span class=\"hljs-keyword\">new</span> AbstractHistory(<span class=\"hljs-keyword\">this</span>, options.base)\n    <span class=\"hljs-keyword\">break</span>\n  <span class=\"hljs-attr\">default</span>:\n    <span class=\"hljs-keyword\">if</span> (process.env.NODE_ENV !== <span class=\"hljs-string\">'production'</span>) {\n      assert(<span class=\"hljs-literal\">false</span>, <span class=\"hljs-string\">`invalid mode: <span class=\"hljs-subst\">${mode}</span>`</span>)\n    }\n}\ninit(){....}\n</code></pre>\n<p>可以看到这个阶段，Vue Router主要做了两件主要的事情：</p>\n<ul>\n<li>创建 match 匹配函数：根据用户路由配置对象生成普通的根据 path 来对应的路由记录以及根据 name 来对应的路由记录的 map，方便后续匹配对应</li>\n<li>根据配置的<code v-pre>mode</code>创建路由实现的实例：\n<ul>\n<li>如果当前环境不支持history模式，会强制切换到hash模式；默认hash模式</li>\n<li>如果当前环境不是浏览器环境，会切换到abstract模式下。</li>\n</ul>\n</li>\n</ul>\n<h4>3. 创建Vue实例</h4>\n<p>在这里创建Vue实例，首先会执行install时候混入的钩子函数，这一部分的源码：</p>\n<pre v-pre><code v-pre class=\"language-javascript\">Vue.mixin({\n  beforeCreate () { \n    <span class=\"hljs-keyword\">if</span> (isDef(<span class=\"hljs-keyword\">this</span>.$options.router)) {\n      <span class=\"hljs-keyword\">this</span>._routerRoot = <span class=\"hljs-keyword\">this</span>\n      <span class=\"hljs-keyword\">this</span>._router = <span class=\"hljs-keyword\">this</span>.$options.router\n      <span class=\"hljs-keyword\">this</span>._router.init(<span class=\"hljs-keyword\">this</span>)\n      Vue.util.defineReactive(<span class=\"hljs-keyword\">this</span>, <span class=\"hljs-string\">'_route'</span>, <span class=\"hljs-keyword\">this</span>._router.history.current)      <span class=\"hljs-comment\">//为vue实例定义数据劫持</span>\n    } <span class=\"hljs-keyword\">else</span> {\n\n      <span class=\"hljs-keyword\">this</span>._routerRoot = (<span class=\"hljs-keyword\">this</span>.$parent &amp;&amp; <span class=\"hljs-keyword\">this</span>.$parent._routerRoot) || <span class=\"hljs-keyword\">this</span>      <span class=\"hljs-comment\">//非跟组件则直接从父组件中取</span>\n    }\n    registerInstance(<span class=\"hljs-keyword\">this</span>, <span class=\"hljs-keyword\">this</span>)\n  },\n  destroyed () {\n    registerInstance(<span class=\"hljs-keyword\">this</span>)\n  }\n})\n</code></pre>\n<p>这一部分，主要做了两件事情</p>\n<ul>\n<li>对_router赋值，此时this.$options.router包含着传入的路由参数</li>\n<li>执行创建vue router实例中的init方法，根据不同模式生成监控路由变化的History对象</li>\n</ul>\n<pre v-pre><code v-pre class=\"language-javascript\">init (app: any <span class=\"hljs-comment\">/* Vue component instance */</span>) {\n    ...\n    const history = <span class=\"hljs-keyword\">this</span>.history\n    <span class=\"hljs-keyword\">if</span> (history <span class=\"hljs-keyword\">instanceof</span> HTML5History) {\n      history.transitionTo(history.getCurrentLocation())\n    } <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (history <span class=\"hljs-keyword\">instanceof</span> HashHistory) {\n      <span class=\"hljs-keyword\">const</span> setupHashListener = <span class=\"hljs-function\"><span class=\"hljs-params\">()</span> =&gt;</span> {\n        history.setupListeners()\n      }\n      history.transitionTo(\n        history.getCurrentLocation(),\n        setupHashListener,\n        setupHashListener\n      )\n    }\n    history.listen(<span class=\"hljs-function\"><span class=\"hljs-params\">route</span> =&gt;</span> {\n      <span class=\"hljs-keyword\">this</span>.apps.forEach(<span class=\"hljs-function\">(<span class=\"hljs-params\">app</span>) =&gt;</span> {\n        app._route = route\n      })\n    })\n}\n</code></pre>\n<p>这一部分，主要做了两件事情：</p>\n<ul>\n<li>通过history的模式来确定不同路由的切换动作<code v-pre>history.transitionTo</code>，更新浏览器地址\n<ul>\n<li>对于hash模式，更新hash的值</li>\n<li>对于history模式，利用pushState/replaceState更新浏览器地址</li>\n<li>对于Abstract模式下，所做的仅仅是用一个数组当做栈来模拟浏览器历史记录，拿一个变量来标示当前处于哪个位置。</li>\n</ul>\n</li>\n<li>通过<code v-pre>history.listen</code>来注册路由变化的响应回调</li>\n</ul>\n<p>一旦this._router.history.curren，即history实例当前的路由对象有变化，就会触发更新机制，继而调用应用实例的 render 重新渲染</p>\n<ul>\n<li>hash模式的更新机制：触发onHashChange的事件，调用transitionTo</li>\n<li>history模式的更新机制：触发popState的事件，调用transitionTo</li>\n</ul>\n<p><strong>为什么不直接在初始化 HashHistory 的时候监听 hashchange 事件呢？</strong></p>\n<p>这个是为了修复https://github.com/vuejs/vue-router/issues/725 这个 bug 而这样做的，简要来说就是说如果在 beforeEnter 这样的钩子函数中是异步的话，beforeEnter 钩子就会被触发两次，原因是因为在初始化的时候如果此时的 hash 值不是以 / 开头的话就会补上 #/，这个过程会触发 hashchange 事件，所以会再走一次生命周期钩子，也就意味着会再次调用 beforeEnter 钩子函数。</p>\n<p>自此整个vue-router的实现原理就解释完啦~~</p>\n<p>参考文献：</p>\n<ol>\n<li><a href=\"https://blog.csdn.net/u013938465/article/details/79421239\">深入Vue-Router源码分析路由实现原理</a></li>\n<li><a href=\"https://zhuanlan.zhihu.com/p/24574970\">vue-router 源码分析-history</a></li>\n</ol>\n</section></template>\n\n","import { render } from \"./2018-10-17-VueRouter.md?vue&type=template&id=1bd78219\"\nconst script = {}\nscript.render = render\n\nexport default script","<template><section><!-- ---\ntitle: 文本分类综述\ndate: 2016-12-03 \ntags: 算法, 文本分类\n--- -->\n<p>文本分类是一项系统的工程，所涉及的技术很多，按流程可以将文本分类分为:文本预处理阶段、训练阶段、分类阶段、评价四个阶段，其中预处理阶段要文本处理成计算机能识别的格式，首先对文本进行分词处理，中文文本和英文文本组织形式不同，中文文本的分词过程比英文分词要复杂得多。分词后文本的特征词非常多，而我们需要的只是少数有使用价值的特征词，因此分词后的文本要进行特征选择，并将特征选择后的特征项加权，最后将文本表示成向量空间模型(VSM)，经过预处理后的文本才能进行分类。分类算法是文本分类的核心技术。评估阶段是对文本分类的效果进行评价，常用的指标有:准确率、召回率、以及综合这两个指标的评价方法一F1值等。</p>\n<h3>文档表示方法</h3>\n<p>文档集划分为训练集和测试集两个部分，训练集用于分类模型的学习，一般占整个文档集的70%;测试集用于评价分类模型，一般占整个文档集的30%。开放的英文文档集Reuters-21578和20NewsGroups。前者比后者更为常用。</p>\n<p>经过半个世纪的发展，在文本处理领域，研究者提出了一些文本表示模型，主要有：布尔模型、向量空间模型、概率检索模型、n-Gram模型等，其中使用最广、效果最好的是向量空间模型。</p>\n<p><strong>向量空间模型</strong></p>\n<p>20世纪60年代，Salton G等人提出了向量空间模型，并成功应用于SMART文本检索系统，其基本思想是:将文本表征成由特征项(词)构成的向量空间中的一个点，（W1,W2,…,Wi），其中Wi为第i个特征项的权重，然后通过计算空间两点之间的相似度来表示两个文本的相关程度，相似度计算一般采用欧氏距离或向量夹角的余弦值。向量空间模型在实际使用中取得了很好的效果，常用的文本分类算法中，支持向量机、K近邻、和NB都是基于向量空间模型的。</p>\n<p><strong>布尔模型</strong></p>\n<p>布尔模型可以看作是向量模型的一种特例，根据特征是否在文档中出现，特征的权值只能取1或0。许多时候，使用二值特征的分类效果结果并不比考虑特征频率的差。决策树方法、关联规则方法和Boosting方法就是基于布尔模型。</p>\n<p><strong>概率模型</strong></p>\n<p>我们可以用该流程的思想来解决出现在文档检索中的不确定性和找寻的不清楚性。概率模型的理论是基于概率排队的：如果文件是按相关概率递减方向排队时，那么就会出现最大的检索性能。选用此种模型可以克服BM和SVM中的不足，此种模型根据词与词间和文档间与词条的概率关联性进行搜索。设文档d和顾客查询c都用（a1,a2,…an）表示，当词条ti∈d时，有ai=1.否则ai=0,这种关系可数学表示为：\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image1.png\" class=\"center\">\n其中\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image2.png\" class=\"center\">\n　　f是所有参加训练的文档的总和，r则为顾客查询与文档集中相关的文档数，fi则表示训练文档集中有ti的文档数，ri则表示r个相关文档中有ti的文档数，模型的有点是有着非常严谨的数学理论基础，解决了不确定性推理的缺点，但是它的不足在于参数估计方面很困难，在文件和查询的表达方面也是很困难</p>\n<h3>文档分词</h3>\n<p>词是文本中最小的具有意义的语言成分，是构造向量空间模型的基础，文本分词的效果直接影响到文本分类的结果。在文本的组织上，中文与以英语为代表的欧美语言有着很大的不同，在西方语言中，词与词是使用空格隔开的，因此不需要进行分词处理，而在中文文本中，字、词是连在一起的，一个语句就是一连串的字、词组合，词与词之间没有明显界限，因此，分词的难度较大。常用的分词算法主要有:基于词典的分词方法、基于理解的分词方法、基于统计的分词方法。</p>\n<p><strong>基于词典的分词方法</strong></p>\n<p>基于词典的分词方法又叫做机械分词方法，它是按照一定的策略将待切分的字符串与词典中的词条进行匹配，若在词典中找到某个字符串，则匹配成功(即识别出一个词)。按照扫描方向的不同，基于词典的分词方法可以分为正向匹配和逆向匹配;按照不同长度优先匹配的情况，可以分为最大匹配和最小匹配;按照是否与词性标注过程相结合，又可以分为单纯分词方法和分词与标注相结合的一体化方法，常用的几种基于词典分词方法如下:正向最大匹配法(由左到右的方向)、逆向最大匹配法(由右到左的方向)、逐词遍历法。</p>\n<p>在实际应用中，常常将上述方法结合起来。例如，可以将正向最大匹配方法和逆向最大匹配方法结合起来构成双向匹配法。由于汉语单字成词的特点，正向最小匹配和逆向最小匹配一般很少使用。一般说来，逆向匹配的切分精度略高于正向匹配，遇到的歧义现象也较少。</p>\n<p>再一种方法是改进扫描方式，称为特征扫描或标志切分，优先在待分析字符串中识别和切分出一些带有明显特征的词，以这些词作为断点，可将原字符串分为较小的串再来进行机械分词，从而减少匹配的错误率。还有一种方法是将分词和词类标注结合起来，利用丰富的词类信息对分词决策提供帮助，并且在标注过程中又反过来对分词结果进行检验、调整，从而极大地提高切分的准确率。目前实用的自动分词系统基本上都是以采用机械分词为主，辅以少量的词法、语法和语义信息的分词系统。该方法的优点是易于实现，但精度较低，远远不能满足实际的需要。实际使用的分词系统，都是把机械分词作为一种初分手段，再利用各种其它的语言信息来进一步提高切分的准确率。</p>\n<p><strong>基于理解的分词方法</strong></p>\n<p>又称人工智能分词法，这种分词方法是通过让计算机模拟人对句子的理解，达到识别词的效果。其基本思想就是在分词的同时进行句法、语义分析，利用句法信息和语义信息来处理歧义现象。它通常包括三个部分:分词子系统、句法语义子系统、总控部分。在总控部分的协调下，分词子系统可以获得有关词、句子等的句法和语义信息来对分词歧义进行判断，即它模拟了人对句子的理解过程。这种分词方法需要使用大量的语言知识和信息。由于汉语语言知识的笼统、复杂性，难以将各种语言信息组织成机器可直接读取的形式，因此目前基于理解的分词系统还处在试验阶段。</p>\n<p><strong>基于统计的分词方法</strong></p>\n<p>基于统计的分词算法的思想是:找出输入字符串的所有可能的切分结果，对每种切分结果利用能够反映语言特征的统计数据计算它的出现概率，然后从结果中选取概率最大的一种。词是稳定的字的组合，因此在上下文中，如果相邻的字共现的次数越多，就越有可能构成一个词。因此字与字相邻出现的频率或概率能够较好的反映成词的可信度。通过对语料中相邻共现的各个字的组合频度进行统计，计算它们的互现信息。互现信息体现了汉字之间结合关系的紧密程度。当紧密程度高于某一个阈值时，便可认为此字组可能构成了一个词。这种方法只需对语料中的字组频度进行统计，不需要切分词典，因而又叫做无词典分词法或统计取词方法。但这种方法也有一定的局限性，会经常抽出一些共现频度高、但并不是词的常用字组，并且对常用词的识别精度差，时空开销大。实际应用的统计分词系统都要使用一部基本的分词词典进行串匹配分词，同时使用统计方法识别一些新的词，即将串频统计和串匹配结合起来，既发挥匹配分词切分速度快、效率高的特点，又利用了无词典分词结合上下文识别生词、自动消除歧义的优点。</p>\n<p>对于任何一个成熟的中文分词系统来说，不可能单独依靠某一种算法来实现，需要\n综合不同的算法来处理不同的问题。</p>\n<h3>停用词处理技术</h3>\n<p>经过分词处理的文本，并不是所有的特征都对构造向量空间模型和分类有帮助，相反，将对文本分类没有帮助的词作为特征项，会对分类的精度造成很大的影响，特别对于使用文档频率(DF)进行特征选择的分类方法，影响更大。另外，去停用词可以很大程度上减小特征项的数量，对文本降维具有很大帮助，所以在构造向量空间模型前，要对分类无帮助的词进行尽可能彻底的清理。去停用词在技术上实现并不复杂，只需建立一个停用词词典停用词词典内的词条进行匹配，如果匹配成功，则将该词去掉。</p>\n<h3>特征选择方法</h3>\n<p>在经过文本分类系统的分词、去停用词处理后，文本的特征维数仍然很高，这里所指的特征维数是指要构造VSM空间的所有文本的特征之和，一个文本集合很可能包含十几万个特征词，而每篇文本包含的特征词却很少，这样构造的向量空间模型是一个高维的稀疏矩阵，会对分类算法的时间复杂度和空间复杂度造成很大的影响。实验显示，当向量空间的特征维度达到一定值时就可以实现很高的分类性能，随着特征维度的增加，分类性能反而会下降。因此，必须对特征项进行有效的筛选。常用的文本特征选择方法有:文档频率(DF)、信息增益(IG)、互信息(MI)、X2统计量(CHI)、期望交叉嫡等，这些方法的基本思想都是对每一个特征(在这里是中文词)，计算某种统计度量值，然后设定一个阈值T，把度量值小于T的那些特征过滤掉，剩下的即认为是有效特征。</p>\n<p><strong>文档频率（DF）</strong></p>\n<p>DF值低于某个阈值的词条是低频词，它们不含或含有较少的类别信息。将这样的词条从原始特征空间中移除，不但能够降低特征空间的维数，而且还有可能提高分类的精度。DF高于某个阈值的词为中、高频词，这些词被认为对分类的影响较大，应该保留。在英文环境中，当IG和CHI等统计方法的计算复杂度太高时，DF可以代替它们被使用。</p>\n<p><strong>互信息（MI）</strong></p>\n<p>如果用A表示包含词条t且属于类别c的文档频数，B为包含t但不属于c的文档频数，C表示属于c但是不包含t的文档频数，N表示语料中的文档总数，t和c的互信息由下式计算：\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image3.png\" class=\"center\"></p>\n<p>如果t和c无关（即P(tc)=P(t)*P(c)），I(t,c)值自然为零。为了将互信息应用于多个类别，由下式计算t对于c的互信息：\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image4.png\" class=\"center\"></p>\n<p>其中m为类别数，将低于特定阈值的词条从原始特征空间中移除，降低特征空间的维数，保留高于阈值的词条</p>\n<p><strong>信息增益（IG）</strong></p>\n<p>表示文档包含某一特征时文档类的平均信息量，定义为某一特征在文档中出现前后的信息熵之差。假定c为文本类变量，C为文本类的集合，d为文本，f为特征。对于特征f其信息增益记为IG(f)，计算公式\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image5.png\" class=\"center\"></p>\n<p><strong>X2统计（CHI）</strong></p>\n<p>CHI统计方法度量词条t和文档类别c之间的相关程度，并假设t和c之间符合具有一阶自由度的x2分布，词条对于某类的x2统计值越高，它与类之间的相关性越大，携带的类别信息也较多，令N表示训练语料中的文档总数，c为某一特定类别，t表示特定的词条，A表示属于c类且包含t的文档频数，B表示不属于c类但包含t的文档频数，C表示属于c类但不包含t的文档频数，D表示既不属于c也不包含t的文档频数，则t对于c的CHI值计算公式：\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image6.png\" class=\"center\"></p>\n<p>对于多类问题，分别计算t对于每个类别的CHI值，可以用下面两种标准计算t对整个训练集的CHI：\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image7.png\" class=\"center\"></p>\n<p>其中m为类别数，从原始特征空间中移除低于特定阈值的词条，保留高于该阈值的词条作为文档表示的特征</p>\n<h3>特征权重计算方法</h3>\n<p><strong>布尔权重</strong></p>\n<p>均权，布尔权重是最最简单的一种赋权方法，这种方法将所有特征同等看待，既不突出又不抑制任何一个特征。特征项的权值或者等于1，或者等于0,计算公式为:\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image8.png\" class=\"center\"></p>\n<p>其中Wi为特征项i的权重，TF为特征项i出现的次数，这种方法的缺点就是无法体现一个词在文本中的重要程度。</p>\n<p><strong>TF权重</strong></p>\n<p>TF权重(Term Frequency)又称词频权重，或称特征项频率。不同类别的文档，在特征项的出现频率上有很大差异，因此特征项频率信息是文本分类的重要参考之一，一般较大的特征项在该类文档中具有较高的权重。它的计算公式为:\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image9.png\" class=\"center\"></p>\n<p>实际应用中各类别文本的长度很难一致，各类文本包含的字数、词数可能差别会很大，这对词频会造成直接影响，因此通常对词频作归一化处理。另外，如果特征选择后的特征项中含有较多的非名词(如代词、数词、连词)，而这些词出现的概率非常高，如果使用TF权重加权，会赋值给这些词较高的权重，这势必对分类结果产生不利影响，因此，TF权重对去停用词的效果具有较强依赖性。</p>\n<p><strong>IDF权重</strong></p>\n<p>IDF越大，此特征项在文档中的的分布越集中，说明它在区分该文档内容属性方面的能力越强。反文档频率是特征项在文档集分布情况的量化。该方法以出现特征词的文本数为参数构建的函数代表特征项的权重。这体现了信息论中集中度的思想，具有一定的合理性，但忽略了分散度和频度两个因素，因此具有片面性，公式如下:\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image11.png\" class=\"center\"></p>\n<p><strong>TFIDF权重</strong></p>\n<p>TFIDF(Term Frequency-Inverse Document Frequency)是由是由Salton在1988年提出的，TFIDF权重综合考虑了TF权重和IFD权重的优点和不足，是目前加权效果最好的权重计算方法，广泛应用于文本处理领域。其基本思想是:如果特征项t在一类文档的出现的次数越多，而在整个文档集中出现的频率越低，那么t对分类的作用越大，应该赋予越高的权重，例如，助词“的”几乎在每篇文档中都出现，因此它的TF值非常高，相反，IDF值却非常低，综合考虑TF和IDF，该词将被赋予很低的权重。TFIDF权重，即TF权重和IDF权重的组合，利用了词频和文本频率两种信息，公式如下:\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image12.png\" class=\"center\"></p>\n<p>式中TF为第k个特征词在第1篇文本中出现次数，N为训练集中总文本数，nk为出\n现第k个特征词的文本数，a为一个经验值，一般取0. 01,  0. 1或者1</p>\n<h3>相似度计算</h3>\n<p><strong>向量夹角的余弦</strong></p>\n<p>设文档A在VSM空间中的向量形式为a(x1,x2,…,xa)，文档B在VSM空间中向量形式为b(y1,y2,…,yb),则A,B文本的向量夹角的余弦表示为\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image13.png\" class=\"center\"></p>\n<p>两个向量夹角的余弦值越大，表示这两个向量的相似度越高</p>\n<p><strong>欧氏距离</strong></p>\n<p>欧式距离是通过空间向量点之间的距离来表示文本的相关程度，具体的形式为：\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image14.png\" class=\"center\"></p>\n<p>其中d(x,y)是样本x和y的欧式距离，m是样本属性总数，两个向量点之间的欧式距离越小，表示两个向量的相似度越高，在文本分类领域，使用向量夹角余弦计算文本相似度的效果，要好于欧式距离</p>\n<h3>文本分类方法</h3>\n<p>从文本分类的方法来看，现有的文本分类技术主要采用三种类型的方法:基于统计的方法，基于连接的方法和基于规则的方法。</p>\n<p><strong>基于连结的方法</strong></p>\n<p>即人工神经网络，是设计来模拟人脑神经网络的，并期望其能像大脑一样地运作，像大脑一样地学习，从而产生智慧。这种方法具有信息分布存放、运算全局并行、处理的非线性、容错性等特点，适用于学习一个复杂的非线性映射。但是使用它学习所形成的知识结构是人所难以理解的，系统本身对于使用的人来说就象是一个变魔术的黑盒子，根据输入给出输出，答案正确但不知道是怎么算出来的。</p>\n<p><strong>基于规则的方法</strong></p>\n<p>一种唯理主义方法，本质上是一种确定性的演绎推理方法，优点在于根据上下文对确定性事件进行定性描述，能充分利用现有的语言学成果。它成立的前提是有大量的知识，而这些知识是人类专家总结出来的，至少解释这些知识的各种“事实”以及对事实的解释“规则”是专家总结归纳的。由于必须有人的参与，所以对于知识的可理解性，可读性非常重视。同时，在不确定性事件的描述，规则之间的相容性等方面存在一些缺陷和限制。该算法在领域专家的知识上具有依赖性，分类体系好，错误率低，but在专业领域的知识组织和管理中比较实用，实现困难，成本高，没有普遍性，不容易移植等缺点。但是，有些统计方法无法解决的问题，利用规则却很容易解决。常用的基于规则的方法有决策树、关联规则等。</p>\n<p><strong>基于统计的方法</strong></p>\n<p>本质上是一种非确定性的定量推理方法，定量是基于概率的，因此其必然会掩盖小概率事件的发生。基于统计的方法是一种经验主义方法，其优势在于它的全部知识是通过对大规模语料库分析得到的，可以取得很好的一致性和非常高的覆盖率，对语言处理提供了比较客观的数据依据和可靠的质量保证。常用的基于统计的方法有Naive Bayes , KNN等。</p>\n<p><strong>NaiveBayes算法</strong></p>\n<p>贝叶斯分类是统计学分类方法，它是一类利用概率统计知识进行分类的算法。在许多场合，朴素贝叶斯(NaiveBayes, NB)分类算法可以与决策树和神经网络分类算法相媲美，该算法能运用到大型数据库中，且方法简单、分类准确率高、速度快。由于贝叶斯定理假设一个属性值对给定类的影响独立于其它属性的值，而此假设在实际情况中经常是不成立的，因此其分类准确率可能会下降。具体地，设每个数据样本用一个n维特征向量来描述n个属性的值，即:X={X1,X2,…,Xn}假定有m个类，分别用C1,C2,…,Cm表示。给定一个未知的数据样本X,若朴素贝叶斯分类法将未知的样本X分配给类C，则一定是:\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image15.png\" class=\"center\"></p>\n<p>根据贝叶斯定律：\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image16.png\" class=\"center\"></p>\n<p>由于P(X)对于所有类为常数，最大化后验概率P(Ci |x)可转化为最大化先验概率P(x|Ci)P(Ci)。如果训练数据集中有许多属性和元组，计算P(x|Ci)的开销可能非常大，为此，通常假设各属性的取值相互独立，这样\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image17.png\" class=\"center\"></p>\n<p>先验概率可以从训练数据集中求得。根据此方法，对于一个位置类别的样本X，可以分别计算出X属于每一个类别Ci的概率然后选择其中概率最大的类别作为其类别。</p>\n<p>Naive Bayes方法分为最大似然模型(Maximum Likelihood Model )、多项式模型(Multinomial Model )、泊松模型(PoisonModel)等。朴素贝叶斯算法的主要优点是：对于文本数据和数值数据的分类效果较好，与其他算法相比易于实现和计算。主要缺点：朴素贝叶斯算法成立的前提是各属性之间相互独立 ，当数据集满足这种独立性假设时，分类的准确度较高，否则可能较低。</p>\n<p><strong>KNN算法</strong></p>\n<p>KNN算法最初由Cover和Hart于1986年提出，该算法的基本思想：根据传统的向量空间模型，文本内容被形式化为特征空间中的加权特征向量，即D=D(T1,W1;T2,W2;…;Tm,Wm)。对于测试文本，计算它与训练样本集中每个文本的相似度，找出K个最相似的文本，根据加权距离和判断测试文本所属的类别。具体算法步骤如下：</p>\n<ul>\n<li>\n<p>对于一个测试文本，根据特征词形成测试文本向量</p>\n</li>\n<li>\n<p>计算该测试文本与训练集中每个文本的文本相似度：\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image18.png\" class=\"center\"></p>\n</li>\n</ul>\n<p>式中di为测试文本的特征向量，dj为第j类的中心向量；M为特征向量的维数；Wk为向量的第k维。k的值的确定一般先采用一个初始值，然后根据实验测试K的结果调整K值，一般初值设定为几十到几百</p>\n<ul>\n<li>\n<p>按照文本相似度，在训练文本集中选出与测试文本最相似的k个文本</p>\n</li>\n<li>\n<p>在测试文本的k个近邻中，依次计算每类的权重，计算公式\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image19.png\" class=\"center\"></p>\n</li>\n</ul>\n<p>x为测试文本的特征向量；Sim(x,di)为相似度计算公式；b为阈值，有嗲与优化选择；而y(di,cj)的取值为1或者0，如果di属于cj，则函数值为1，否则为0</p>\n<ul>\n<li>比较类的权重，将文本分到权重最大的那个类别\n也就是说，如果在这k个文档中，有多个文档同属于一个类，则该类的分值为这些文档与测试文档之间的相似度之和。对这k个文档所属类的分值统计完毕后，即按分值进行排序。</li>\n</ul>\n<p><strong>类中心向量法</strong></p>\n<p>类中心向量法的算法思想非常简单：将每一类别文本训练后得到该类别的中心向量Cj(W1,W2,…,Wj)分类时，将待分类文本T表示成n维向量的形式T(W1,W2,…,Wn)然后，计算文本T与每类中心向量的相似度，相似度计算可以采用向量夹角的余弦或是欧氏距离表示，将T归类为与其相似度最大的类中：\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image20.png\" class=\"center\"></p>\n<p>类中心的选择有三种方式：平均中心、和平均、归一化平均。和中心是某一类别中所有向量相加之和：\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image21.png\" class=\"center\"></p>\n<p>将和中心与该类向量的个数相除得到类别的平均中心：\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image22.png\" class=\"center\"></p>\n<p>而采用二范数对平均中心归一化处理得到归一化中心：\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image23.png\" class=\"center\"></p>\n<p>类中心向量法的优点是对训练集进行了最大程度的裁剪，待分类文本只需与极少的类中心向量对比，就可以将其分类，因此训练和分类速度很快。缺点是分类精度受类别的分布影响较大，当类别分布均匀，边界清晰时，分类精度较高;当类别分布不平衡，边界模糊时，分类的效果不好。</p>\n<p><strong>SVM算法</strong></p>\n<p>支持向量机SVM(Support Vector Machines)是Vapnik等人提出的一种基于统计学习理论的机器学习方法。SVM建立在统计学理论的VC理论和结构风险最小化原理基础上，其基本思想是:使用简单的线形分类器划分样本空间，如果一个训练集中的矢量被一个超平面正确地线性分割，且距离超平面最近的矢量之间的距离最大，则称该超平面为最佳超平面，其中距离超平面最近的对决策面设计起作用的点称为支持向量(Support Verctors)。支持向量机在解决小样本，非线性及高维模式识别问题等方面表现出明显的优势。</p>\n<p>SVM的基本思想可用图3-1的两维情况来说明。图中，实心点和空心点代表两类样本，H为分类线，H1, H2分别为过各类中离分类线最近的样本且平行于分类线的直线，它们之间的距离叫做分类间隔(margin)。所谓最优分类线就是要求分类线不但能将两类正确分开(训练错误率为0)，而且使分类间隔最大。\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image24.png\" class=\"center\"></p>\n<p>支持向量机主要优点：对高维、稀疏数据不敏感，更好的捕捉了数据的内在特征，准确率高；缺点：对于非线性问题，核函数选择较为困难，分类结果召回率较低</p>\n<p>训练样本在各个类别中分布的不均匀性对许多分类器会形成噪声。例如:在Bayes模型中，如果先验分布无法确定，“均匀分布”是符合信息论的最大嫡原则( Maximum Entropy)的;对于KNN和SVM分类器，远离类别边界的样本往往对分类没有什么作用，KNN分类器还会因为类别边界部分样本分布的不均匀而造成测试样本的错分。从候选训练样本集中选择合适的训练样本子集，不仅可以减少分类器的学习时间，甚至可以提高分类器的准确性。四种方法的实验结果比较：\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image25.png\" class=\"center\">\n　\n　　可以看出支持向量机具有最好的分类效果，各项指标全面领先于其他分类算法。KNN分类效果仅次于支持向量机，而类中心向量法也有很好的分类表现，贝叶斯的分类效果最差，与其它三种算法相比有较大差距。在追求分类效率而对分类精度要求不高的领域，可以考虑使用类中心向量分类法，可以极大提高分类的效率;在对对分类精度要求较高时，可以采用SVM或KNN分类法。</p>\n<h3>分类结果评估</h3>\n<p><strong>单标注分类问题</strong></p>\n<p>文档分类中普遍使用的性能评估指标有查全率(Recall，简记为:r)、查准率（C Precision，\n简记为P)。对于文档类中的每一个类别，使用列联表(Contingency Table )来计算查全率和查准率。</p>\n<table>\n<thead>\n<tr>\n<th>Tables</th>\n<th>真正属于该类的文档数</th>\n<th>真正不属于该类的文档数</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>判断为属于该类的文档数</td>\n<td>a</td>\n<td>b</td>\n</tr>\n<tr>\n<td>判断为不属于该类的文档数</td>\n<td>c</td>\n<td>d</td>\n</tr>\n</tbody>\n</table>\n<p>这时，r和P分别定义为:\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image26.png\" class=\"center\"></p>\n<p><strong>宏平均and微平均</strong></p>\n<p>用列联表只能评价单个类的分类性能，如果要对分类的整体性能进行评价，通常使用宏\n平均    &lt; Macro-Averaging)和微平均    ( Micro-Averaging )。宏观平均是先对每一个类统计r、p值，然后对所有的类求r、P的平均值，即\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image27.png\" class=\"center\"></p>\n<p>微观平均是先建立一个全局列联表，然后根据这个全局列联表进行计算，即:\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image28.png\" class=\"center\"></p>\n<p>显然，宏平均是对类的平均，所以容易受小类的影响，而微平均则是对文档的平均，容易受到大类的影响。</p>\n<p><strong>平衡点(Break-even Point )</strong></p>\n<p>对于分类系统来说，r和p值是互相影响的。提高r会引起p的减小，反之亦然。因此，\n为了更全面地反映分类系统的性能，一种做法是选取和p相等时的值来表征系统性能，这个值叫做平衡点(Break-even Point，简称BEP)值。当然，有时通过测试可能得不到和p相等的值。这时取最接近的和p值的平均值作为BEP值，称为插值BEP</p>\n<p><strong>F值(F-measure )</strong></p>\n<p>另一种常用的将查全率和查准率结合起来的性能评价方法是F测量，其计算公式为:\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image29.png\" class=\"center\"></p>\n<p>其中，β是一个用来调节查全率和查准率权重的参数。β一般取值为1,公式转化为:\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image30.png\" class=\"center\"></p>\n<p>显然，BEP是F1的特殊形式，因为当r=p时，有F1 =BEP</p>\n<p><strong>多标注分类问题</strong></p>\n<p>每一个输入的测试文档，都会返回一个排序后的文档类列表。这时，两个指标分别定为:\n<img src=\"https://zhangmingemma.github.io/dist/images/2016-12-03/20161203image31.png\" class=\"center\"></p>\n<p>整个分类器的评估应该是对所有测试文档的这两个指标的统计平均。通常使用的统计平均为11点插值平均查准率(Interpolated 11-point Average Precision )</p>\n<h3>文本可视化</h3>\n<ul>\n<li>\n<p>标签云：经典的静态可视化分析，Wordle：将关键词或者标签生成为一个可视化的词云</p>\n</li>\n<li>\n<p>ThemeRiver：动态文本可视化，TIARA：参考了wordle的源码实现了系统中的文本静态可视化</p>\n</li>\n<li>\n<p>CiteSpace：以可视化技术针对科学论文以及引文进行网络分析的软件</p>\n</li>\n</ul>\n</section></template>\n\n","import { render } from \"./2016-12-03-Text Categorization Summary.md?vue&type=template&id=54c69f2e\"\nconst script = {}\nscript.render = render\n\nexport default script"],"sourceRoot":""}